{"version":3,"sources":["../../../widgets/Consulta_wgt/Widget.js"],"names":["declare","_WidgetsInTemplateMixin","BaseWidget","lang","LayerInfos","Query","QueryTask","StatisticDefinition","FeatureLayer","Message","BusyIndicator","SpatialReference","baseClass","iniClause","layersMap","field_dep_nm_depa","field_dep_cd_depa","field_prov_nm_prov","field_prov_cd_prov","field_dist_nm_dist","field_dist_cd_dist","field_codigou_dm","field_concesion_dm","field_sustancia_dm","field_id","field_minero_informal","field_minero_informal_rep","field_m_ruc","field_derecho_minero","field_id_unidad","field_tipo_persona","field_id_ubigeo_inei","field_id_reinfo","field_id_maestra","field_id_autorizacion","field_id_tb","field_minero_informal_tb","field_m_ruc_tb","field_derecho_minero_tb","field_id_unidad_tb","field_tipo_persona_tb","field_id_ubigeo_inei_tb","controller_query","controller_layer_query","controller_ubigeo","temporal_class_results","feature_dc","feature_dm","queryController","numero_registros","numero_paginas","registros_pagina","pagina_actual","grupo_actual","grupos_paginas","factor","whereDefinition","stateCoord","postCreate","self_cw","inherited","arguments","_getAllLayers","getLayerInfoById","config","layer_id_dc","feature_dc_table","getTableInfoById","table_id_dc","layer_id_dm","feature_dep","layer_id_dep","feature_prov","layer_id_prov","feature_dist","layer_id_dist","getInstance","map","itemInfo","then","hitch","layerInfosObj","_showMessage","message","type","messagebox","titleLabel","nls","_widgetLabel","buttons","label","onClick","close","_cleanMap","_getDataByTipoPersona","id","query","where","returnGeometry","returnDistinctValues","outFields","layerObject","queryFeatures","results","features","length","forEach","opt","document","createElement","value","i","attributes","text","select_tipo_persona_cw","add","selected","error_tipo_persona_count","error","error_tipo_persona","_getDataByDepartamento","queryTask","getUrl","orderByFields","execute","departamento_cw","error_departamento_count","error_departamento","_getDataByProvincia","evt","busyIndicator","show","cd_depa","target","distrito_cw","innerHTML","container_distrito_cw","classList","remove","container_provincia_cw","hide","contains","toggle","_zoomExtendSelected","fragment","createDocumentFragment","provincia_cw","appendChild","error_provincia_count","error_provincia","_getDataByDistrito","cd_prov","substring","error_distrito_count","error_distrito","_getDistritoSelected","cd_dist","_addEventToLayerQuery","dojo","on","_setFormContainer","title","currentTarget","innerText","titulo_consulta","ListaCapasConsulta","hidden","nodeContainer_cw","toggleClass","node","dataset","dojoAttachPoint","includes","_returnListaCapasConsulta","_addEventToTabsOptions","_connectTabsWithOptionContainer","option","toLowerCase","container_option","_validateRucNumber","val","replace","_openPopupAutocamitcally","featureInfo","center","infoWindow","setFeatures","getInfoWindowAnchor","centerAt","_openPopupAutocamitcally2","featureLayer","_zoomDmExtentToMap","setFilter","getLayerObject","response","ext","geometry","getExtent","getCentroid","setExtent","none_element","none_reference_map","error_query_feature","error_service","feature","queryExtent","res","count","extent","_applyQuery","ap_registros_encontrados_cw","_applyQueryDC2","_applyQueryDM2","_cloneNode","clone","nodeType","createTextNode","nodeValue","cloneNode","child","firstChild","nextSibling","_rowNode","parser","DOMParser","doc","parseFromString","body","childNodes","_populateResultsDC","arrayResults","enumerate_ini","r","newRow","style","display","estateLocation","getElementsByClassName","fieldsList","push","field_dc_ruc","field_nombre_dm","fieldsListNode","join","_showPopupRowSelectedClick","_showReinfos","parentElement","getAttribute","elm","removeChild","rownum","show_reinfos","data","lidata","index","lidataString","ulnode","create","addClass","none_element_pl","_populateResultsDM","_showPopupRowSelectedClickDM","id_row","console","log","selectFeatures","SELECTION_NEW","error_none_geometry","centerAndZoom","catch","startup","domNode","parentNode","backgroundOpacity","onOpen","lyr_dc","lyr_dm","container_resultados_opcion_cw","ap_none_resultados_opcion_cw","onClose","clean_map_question","_queryDcGeneral","queryCount","ap_indicador_resultados_cw","ap_titulo_resultados_cw","_generatePages","_queryDcByPage","queryDmGeneral","queryIds","_queryDmByPage","n","ap_titulo_registros_resultados_cw","ap_resultados_cw","click","num","start","fin","String","result","rowcount","ids","ids_join","query_ids","class_list_container_resultados","ap_anterior_page_cw","setAttribute","ap_siguiente_page_cw","removeAttribute","_queryDcByPageEvent","page","parseInt","_queryDmByPageEvent","_nextPage","_generatePagesFromArray","_backPage","ap_pagination_cw","ap_pagination_list_cw","Math","ceil","_generateGroupsPages","paginas","Array","from","keys","slice","grupos","grupos_array","pages","pages_html_array","class_element","splice","pages_html","whereDefinitionArray","input_ruc_dc_cw","ruc_dc","input_nombre_dc_cw","nombre_dc","tipo_persona_dc","input_codigou_dc_cw","codigou_dc","input_nombre_dm_dc_cw","nombredm_dc","ubigeo_dc","codigou_dm","input_codigou_dm_cw","nombredm_dm","input_nombre_dm_cw"],"mappings":"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","file":"Widget.js","sourcesContent":["import declare from 'dojo/_base/declare';\r\nimport _WidgetsInTemplateMixin from 'dijit/_WidgetsInTemplateMixin';\r\nimport BaseWidget from 'jimu/BaseWidget';\r\n// import query from \"dojo/query\";\r\nimport lang from 'dojo/_base/lang';\r\nimport LayerInfos from 'jimu/LayerInfos/LayerInfos';\r\nimport Query from \"esri/tasks/query\";\r\nimport QueryTask from \"esri/tasks/QueryTask\";\r\nimport StatisticDefinition from \"esri/tasks/StatisticDefinition\";\r\n// import InfoTemplate from \"esri/InfoTemplate\";\r\nimport FeatureLayer from \"esri/layers/FeatureLayer\";\r\n\r\n// import GraphicsLayer from \"esri/layers/GraphicsLayer\";\r\n// import Graphic from 'esri/graphic';\r\n\r\n// import SimpleFillSymbol from \"esri/symbols/SimpleFillSymbol\";\r\n// import SimpleLineSymbol from 'esri/symbols/SimpleLineSymbol';\r\n// import SimpleMarkerSymbol from 'esri/symbols/SimpleMarkerSymbol';\r\n// import Color from 'dojo/_base/Color';\r\n\r\nimport Message from \"jimu/dijit/Message\";\r\n// import 'jimu/dijit/LoadingIndicator';\r\n// import 'jimu/dijit/LoadingShelter'\r\nimport BusyIndicator from 'esri/dijit/util/busyIndicator';\r\nimport SpatialReference from \"esri/SpatialReference\";\r\n// import domConstruct from 'dojo/dom-construct';\r\n// import on from 'dojo/on';\r\n// import domClass from \"dojo/dom-class\";\r\n// import \"dojo/domReady!\";\r\n\r\n// To create a widget, you need to derive from BaseWidget.\r\nexport default declare([BaseWidget, _WidgetsInTemplateMixin, Query,\r\n    QueryTask,\r\n    StatisticDefinition,\r\n    // FeatureLayer\r\n], {\r\n\r\n    // Developer: Ing. Geógrafo Daniel Aguado H.\r\n    // linkedin: https://www.linkedin.com/in/danielgis\r\n    // WebSite: https://danielgis.github.io/\r\n\r\n    // Custom widget code goes here\r\n\r\n    baseClass: 'consulta-wgt',\r\n    iniClause: '1=1',\r\n\r\n    layersMap: [],\r\n\r\n    field_dep_nm_depa: 'NM_DEPA',\r\n    field_dep_cd_depa: 'CD_DEPA',\r\n\r\n    field_prov_nm_prov: 'NM_PROV',\r\n    field_prov_cd_prov: 'CD_PROV',\r\n\r\n    field_dist_nm_dist: 'NM_DIST',\r\n    field_dist_cd_dist: 'CD_DIST',\r\n\r\n\r\n    // // Campos DM Ingemmet\r\n    // field_codigou_dm: 'CODIGOU',\r\n    // field_concesion_dm: 'CONCESION',\r\n    // field_sustancia_dm: 'SUSTANCIA',\r\n\r\n    //  Campos DM Minem\r\n    field_codigou_dm: 'ID_UNIDAD',\r\n    field_concesion_dm: 'NOMBRE_DM',\r\n    field_sustancia_dm: 'SUSTANCIA',\r\n\r\n    // Campos DC\r\n    field_id: 'ID', // Objectid del minero informal\r\n    field_minero_informal: 'NOMBRE_MIN', // Nombre del minero informal\r\n    field_minero_informal_rep: 'NOMBRE_REP', // Nombre del representante\r\n    field_m_ruc: 'M_RUC', // RUC del minero informal\r\n    field_derecho_minero: 'NOMBRE_DM', // Nombre del derecho mineroo\r\n    field_id_unidad: 'ID_UNIDAD', // Identificador del derecho minero (CODIGOU)\r\n    field_tipo_persona: 'M_TIPO_PERSONA', // Tipo de persona (natural, juridica)\r\n    field_id_ubigeo_inei: 'ID_DIST', // Ubigeo\r\n\r\n    field_id_reinfo: 'ID_REINFO',\r\n    field_id_maestra: 'ID_MAESTRA',\r\n    field_id_autorizacion: 'ID_AUTORIZACION',\r\n\r\n\r\n    // Campos Tabla DC\r\n    field_id_tb: 'ID', // Objectid del minero informal\r\n    field_minero_informal_tb: 'NOMBRE_MIN', // Nombre del minero informal\r\n    // field_minero_informal_rep_tb: 'NOMBRE_REP', // Nombre del representante\r\n    field_m_ruc_tb: 'M_RUC', // RUC del minero informal\r\n    field_derecho_minero_tb: 'NOMBRE_DM', // Nombre del derecho mineroo\r\n    field_id_unidad_tb: 'ID_UNIDAD', // Identificador del derecho minero (CODIGOU)\r\n    field_tipo_persona_tb: 'M_TIPO_PERSONA', // Tipo de persona (natural, juridica)\r\n    field_id_ubigeo_inei_tb: 'ID_DIST', // Ubigeo\r\n\r\n    controller_query: '', // Permite identificar la opcion de consulta seleccionada\r\n    controller_layer_query: false,\r\n\r\n    controller_ubigeo: '',\r\n\r\n    temporal_class_results: '',\r\n\r\n    feature_dc: null,\r\n    feature_dm: null,\r\n\r\n    queryController: '',\r\n\r\n    numero_registros: 0,\r\n    numero_paginas: 0,\r\n    registros_pagina: 1000,\r\n    pagina_actual: 1,\r\n    grupo_actual: 0,\r\n    grupos_paginas: [],\r\n    factor: 4,\r\n    whereDefinition: '',\r\n    stateCoord: ['Fuera del territorio nacional (*)', 'Fuera del DM declarado', 'Ubicación correcta', 'Fuera del DM declarado'],\r\n\r\n    // add additional properties here\r\n\r\n    // methods to communication with app container:\r\n    postCreate() {\r\n        self_cw = this;\r\n        this.inherited(arguments);\r\n        // console.log('Consulta_wgt::postCreate');;\r\n        this._getAllLayers();\r\n        this.feature_dc = this.layersMap.getLayerInfoById(this.config.layer_id_dc);\r\n        this.feature_dc_table = this.layersMap.getTableInfoById(this.config.table_id_dc);\r\n        this.feature_dm = this.layersMap.getLayerInfoById(this.config.layer_id_dm);\r\n        this.feature_dep = this.layersMap.getLayerInfoById(this.config.layer_id_dep);\r\n        this.feature_prov = this.layersMap.getLayerInfoById(this.config.layer_id_prov);\r\n        this.feature_dist = this.layersMap.getLayerInfoById(this.config.layer_id_dist);\r\n    },\r\n\r\n    _getAllLayers() {\r\n        LayerInfos.getInstance(this.map, this.map.itemInfo)\r\n            .then(lang.hitch(this, function(layerInfosObj) {\r\n                this.layersMap = layerInfosObj;\r\n            }));\r\n    },\r\n\r\n    _showMessage(message, type = 'message') {\r\n        switch (type) {\r\n            case 'question':\r\n                let messagebox = new Message({\r\n                    type: type,\r\n                    titleLabel: `Widget ${this.nls._widgetLabel}: ${type}`,\r\n                    message: message,\r\n                    buttons: [{\r\n                        label: 'SI',\r\n                        onClick: lang.hitch(this, lang.hitch(this, function() {\r\n                            messagebox.close();\r\n                        }))\r\n                    }, {\r\n                        label: 'NO',\r\n                        onClick: lang.hitch(this, lang.hitch(this, function() {\r\n                            this._cleanMap();\r\n                            messagebox.close();\r\n                        }))\r\n                    }]\r\n                });\r\n\r\n                break;\r\n            default:\r\n                new Message({\r\n                    type: type,\r\n                    titleLabel: `Widget ${this.nls._widgetLabel}: ${type}`,\r\n                    message: message,\r\n                });\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    // Metodos para agregar opciones a las etiquetas 'select'\r\n    _getDataByTipoPersona() {\r\n        let id = this.config.layer_id_dc\r\n            // let feature_dc = this.layersMap.getLayerInfoById(id);\r\n        let query = new Query();\r\n        query.where = `${this.field_tipo_persona} IS NOT NULL`;\r\n        query.returnGeometry = false;\r\n        query.returnDistinctValues = true;\r\n        query.outFields = [this.field_tipo_persona];\r\n\r\n        self_cw.feature_dc.layerObject.queryFeatures(query, function(results) {\r\n            let features = results.features;\r\n            if (features.length) {\r\n                features.forEach(i => {\r\n                    let opt = document.createElement(\"option\");\r\n                    opt.value = i.attributes[self_cw.field_tipo_persona];\r\n                    opt.text = i.attributes[self_cw.field_tipo_persona];\r\n                    self_cw.select_tipo_persona_cw.add(opt);\r\n                });\r\n                let opt = document.createElement(\"option\");\r\n                opt.value = '';\r\n                opt.text = 'Todos';\r\n                opt.selected = true;\r\n                self_cw.select_tipo_persona_cw.add(opt);\r\n            } else {\r\n                self_cw._showMessage(self_cw.nls.error_tipo_persona_count)\r\n            }\r\n        }, function(error) {\r\n            self_cw._showMessage(`${self_cw.nls.error_tipo_persona}\\n${error.message}`, type = 'error')\r\n        })\r\n    },\r\n\r\n    _getDataByDepartamento() {\r\n        let id = this.config.layer_id_dep\r\n        let feature_dep = this.layersMap.getLayerInfoById(id);\r\n        let queryTask = new QueryTask(feature_dep.getUrl());\r\n        let query = new Query();\r\n        query.where = `${this.field_dep_cd_depa} <> 99`;\r\n        query.returnGeometry = false;\r\n        query.outFields = [this.field_dep_nm_depa, this.field_dep_cd_depa];\r\n        query.orderByFields = [this.field_dep_nm_depa];\r\n        queryTask.execute(query, function(results) {\r\n            let features = results.features;\r\n            if (features.length) {\r\n                results.features.forEach(i => {\r\n                    let opt = document.createElement(\"option\");\r\n                    opt.value = i.attributes[self_cw.field_dep_cd_depa];\r\n                    opt.text = i.attributes[self_cw.field_dep_nm_depa];\r\n                    self_cw.departamento_cw.add(opt);\r\n                })\r\n                let opt = document.createElement(\"option\");\r\n                opt.value = '';\r\n                opt.text = 'Todos';\r\n                opt.selected = true;\r\n                self_cw.departamento_cw.add(opt);\r\n            } else {\r\n                self_cw._showMessage(self_cw.nls.error_departamento_count)\r\n            }\r\n        }, function(error) {\r\n            self_cw._showMessage(`${self_cw.nls.error_departamento}\\n${error.message}`, type = 'error')\r\n        })\r\n    },\r\n\r\n\r\n    _getDataByProvincia(evt) {\r\n        // Evento que se ejecuta cuando el usuario selecciona un departamento\r\n        // Carga las provincias pertenecientes al departamento seleccionado\r\n        // Realiza el zoom en el mapa al departamento seleccionado\r\n\r\n        // habilitar loader\r\n        this.busyIndicator.show();\r\n\r\n        // Obteniendo datos de la opcion seleccionada\r\n        let cd_depa = evt.target.value;\r\n\r\n        // Capturando el codigo de la provincia en el controlador de ubigeo\r\n        this.controller_ubigeo = cd_depa;\r\n\r\n        this.distrito_cw.innerHTML = '';\r\n        this.container_distrito_cw.classList.remove('active');\r\n\r\n        // Si se selecciono la opcion 'Todos' en el elemento 'Select' de departamentos\r\n        if (cd_depa == '') {\r\n            // Removemos el combo de provincias\r\n            this.container_provincia_cw.classList.remove('active');\r\n            // deshabilitar loader\r\n            this.busyIndicator.hide();\r\n            // Salimos del evento\r\n            return\r\n        }\r\n\r\n        // Si el contenedor de provincias no esta activo\r\n        if (!this.container_provincia_cw.classList.contains('active')) {\r\n            // Activar el contenedor de provincias\r\n            this.container_provincia_cw.classList.toggle('active');\r\n        };\r\n\r\n        // Obteniendo el LayerObject de provincias\r\n        let id = this.config.layer_id_prov\r\n        let feature_prov = this.layersMap.getLayerInfoById(id);\r\n        let queryTask = new QueryTask(feature_prov.getUrl());\r\n\r\n        // Definiendo el objeto Query para obtener las provincias del departamento\r\n        let query = new Query();\r\n        query.where = `${this.field_dep_cd_depa} = '${cd_depa}'`;\r\n\r\n        query.returnGeometry = false;\r\n        query.outFields = [this.field_prov_nm_prov, this.field_prov_cd_prov];\r\n        query.orderByFields = [this.field_prov_nm_prov];\r\n\r\n        self_cw._zoomExtendSelected(self_cw.feature_dep, query.where);\r\n\r\n        // Ejecucion de consulta para obtener las opciones de provincias\r\n        queryTask.execute(query, function(results) {\r\n            let fragment = document.createDocumentFragment();\r\n            // Zoom al departamento seleccionado\r\n            let features = results.features;\r\n            // Si se encontraron resultados\r\n            if (features.length) {\r\n                self_cw.provincia_cw.innerHTML = '';\r\n                features.forEach(i => {\r\n                    let opt = document.createElement(\"option\");\r\n                    opt.value = i.attributes[self_cw.field_prov_cd_prov];\r\n                    opt.text = i.attributes[self_cw.field_prov_nm_prov];\r\n                    // self_cw.provincia_cw.add(opt);\r\n                    fragment.appendChild(opt);\r\n                })\r\n                let opt = document.createElement(\"option\");\r\n                opt.value = '';\r\n                opt.text = 'Todos';\r\n                opt.selected = true;\r\n                fragment.appendChild(opt);\r\n                // self_cw.provincia_cw.add(opt);\r\n                self_cw.provincia_cw.appendChild(fragment);\r\n\r\n            } else {\r\n                // Notificar si no se encontraron elementos\r\n                self_cw._showMessage(`${self_cw.nls.error_provincia_count}`)\r\n            };\r\n            // deshabilitar loader\r\n            self_cw.busyIndicator.hide();\r\n        }, function(error) {\r\n            // Notificar si ocurrio algun error al momento de solicitar los datos\r\n            self_cw._showMessage(`${self_cw.nls.error_provincia}\\n${error.message}`, type = 'error')\r\n            self_cw.busyIndicator.hide();\r\n        });\r\n    },\r\n\r\n    _getDataByDistrito(evt) {\r\n        // Evento que se ejecuta cuando el usuario selecciona una provincia\r\n        // Carga las provincias pertenecientes a la provincia seleccionada\r\n        // Realiza el zoom en el mapa a la provincia seleccionada\r\n\r\n        // habilitar loader\r\n        this.busyIndicator.show();\r\n\r\n        // Obteniendo datos de la opcion seleccionada\r\n        let cd_prov = evt.target.value;\r\n\r\n        // Si se selecciono la opcion 'Todos' en el elemento 'Select' de provincias\r\n        if (cd_prov == '') {\r\n            // Anulamos los dos ultimos digitos del controlador de ubigeo\r\n            this.controller_ubigeo = this.controller_ubigeo.substring(0, 2);\r\n            // Ocultamos el selector de distritos\r\n            this.container_distrito_cw.classList.remove('active');\r\n            // deshabilitar loader\r\n            this.busyIndicator.hide();\r\n            return\r\n        }\r\n\r\n        // Si el contenedor de distrito no esta activo\r\n        if (!this.container_distrito_cw.classList.contains('active')) {\r\n            // Activar el contenedor de distrito\r\n            this.container_distrito_cw.classList.toggle('active');\r\n        }\r\n\r\n        // Capturando el codigo de la provincia en el controlador de ubigeo\r\n        this.controller_ubigeo = cd_prov;\r\n\r\n        // Obteniendo el LayerObject de distritos\r\n        let id = this.config.layer_id_dist;\r\n        let feature_dist = this.layersMap.getLayerInfoById(id);\r\n        let queryTask = new QueryTask(feature_dist.getUrl());\r\n\r\n        // Definiendo el objeto Query para obtener los distritos de la provincia\r\n        let query = new Query();\r\n        query.where = `${this.field_prov_cd_prov} = '${cd_prov}'`;\r\n        query.returnGeometry = false;\r\n        query.outFields = [this.field_dist_nm_dist, this.field_dist_cd_dist];\r\n        query.orderByFields = [this.field_dist_nm_dist];\r\n\r\n        self_cw._zoomExtendSelected(self_cw.feature_prov, query.where);\r\n\r\n        // Ejecucion de consulta para obtener las opciones de distritos\r\n        queryTask.execute(query, function(results) {\r\n            let fragment = document.createDocumentFragment();\r\n            // Zoom a la provincia seleccionada\r\n            // self_cw._zoomExtendSelected(self_cw.config.layer_id_prov, query.where);\r\n            self_cw.distrito_cw.innerHTML = \"\";\r\n            let features = results.features;\r\n            // Si se encontraron resultados\r\n            if (features.length) {\r\n                features.forEach(i => {\r\n                    let opt = document.createElement(\"option\");\r\n                    opt.value = i.attributes[self_cw.field_dist_cd_dist];\r\n                    opt.text = i.attributes[self_cw.field_dist_nm_dist];\r\n                    // self_cw.distrito_cw.add(opt);\r\n                    fragment.appendChild(opt)\r\n                })\r\n                let opt = document.createElement(\"option\");\r\n                opt.value = '';\r\n                opt.text = 'Todos';\r\n                opt.selected = true;\r\n                // self_cw.distrito_cw.add(opt);\r\n                fragment.appendChild(opt);\r\n                self_cw.distrito_cw.appendChild(fragment)\r\n            } else {\r\n                // Notificar si no se encontraron elementos\r\n                self_cw._showMessage(`${self_cw.nls.error_distrito_count}`);\r\n            };\r\n            // deshabilitar loader\r\n            self_cw.busyIndicator.hide();\r\n        }, function(error) {\r\n            // Notificar si ocurrio algun error al momento de solicitar los datos\r\n            self_cw._showMessage(`${self_cw.nls.error_distrito}\\n${error.message}`, type = 'error');\r\n            // deshabilitar loader\r\n            self_cw.busyIndicator.hide();\r\n        });\r\n\r\n    },\r\n\r\n    _getDistritoSelected(evt) {\r\n        // Evento que se ejecuta cuando el usuario selecciona una distrito\r\n        // Realiza el zoom en el mapa al distrito seleccionado\r\n        var cd_dist = evt.target.value;\r\n        whereDefinition = `${this.field_dist_cd_dist} = '${cd_dist}'`\r\n        if (cd_dist == '') {\r\n            this.controller_ubigeo = this.controller_ubigeo.substring(0, 4)\r\n            return\r\n        }\r\n        this.controller_ubigeo = cd_dist;\r\n        this._zoomExtendSelected(this.feature_dist, whereDefinition);\r\n        // this._zoomExtendSelected(this.config.layer_id_dist, whereDefinition);\r\n    },\r\n\r\n    // Metodos dedicados al frontend del widget\r\n\r\n    _addEventToLayerQuery() {\r\n        dojo.query(\".capa_consulta_cw\").on('click', this._setFormContainer);\r\n    },\r\n\r\n    _setFormContainer(evt) {\r\n        var title = evt.currentTarget.innerText;\r\n\r\n        self_cw.controller_query = evt.currentTarget.id;\r\n        self_cw.titulo_consulta.innerText = title\r\n        self_cw.ListaCapasConsulta.hidden = true;\r\n\r\n        var nodeContainer_cw = dojo.query(\".container_cw\")\r\n        dojo.toggleClass(nodeContainer_cw[0], 'active')\r\n        dojo.query('.formulario_cw').forEach(function(node) {\r\n            if (node.dataset.dojoAttachPoint.includes(self_cw.controller_query)) {\r\n                node.hidden = false;\r\n            } else {\r\n                node.hidden = true;\r\n            }\r\n        })\r\n    },\r\n\r\n    _returnListaCapasConsulta() {\r\n        var nodeContainer_cw = dojo.query(\".container_cw\");\r\n        dojo.toggleClass(nodeContainer_cw[0], 'active');\r\n        this.ListaCapasConsulta.hidden = false;\r\n    },\r\n\r\n    _addEventToTabsOptions() {\r\n        dojo.query('.opcion_cw').on('click', this._connectTabsWithOptionContainer)\r\n    },\r\n\r\n    _connectTabsWithOptionContainer(evt) {\r\n        var option = evt.currentTarget.innerText.toLowerCase();\r\n        if (evt.currentTarget.classList.contains('is-active')) {\r\n            return\r\n        };\r\n        dojo.query('.opcion_cw').forEach(function(node) {\r\n            var container_option = self_cw[`${node.id}_${node.classList[0]}`]\r\n            if (node.innerText.toLowerCase() == option) {\r\n                node.classList.toggle('is-active')\r\n                container_option.classList.toggle('active')\r\n            } else {\r\n                node.classList.remove('is-active');\r\n                container_option.classList.remove('active')\r\n            }\r\n        });\r\n    },\r\n\r\n    _validateRucNumber(evt) {\r\n        var val = evt.currentTarget.value;\r\n        evt.currentTarget.value = val.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n    },\r\n\r\n    // Interaccion con el mapa\r\n\r\n    _openPopupAutocamitcally(featureInfo, center, whereDefinition) {\r\n        let query = new Query();\r\n        query.where = whereDefinition;\r\n        featureInfo.layerObject.queryFeatures(query, function(results) {\r\n            self_cw.map.infoWindow.setFeatures(results.features);\r\n            self_cw.map.infoWindow.show(center, self_cw.map.getInfoWindowAnchor(center));\r\n            self_cw.map.centerAt(center);\r\n\r\n            // self_cw.map.infoWindow.show(center, self_cw.map.getInfoWindowAnchor(center));\r\n        });\r\n\r\n    },\r\n\r\n    _openPopupAutocamitcally2(featureLayer, center) {\r\n        self_cw.map.infoWindow.setFeatures(featureLayer.features);\r\n        self_cw.map.infoWindow.show(center, self_cw.map.getInfoWindowAnchor(center));\r\n        self_cw.map.centerAt(center);\r\n    },\r\n\r\n    _zoomDmExtentToMap(evt) {\r\n        self_cw.busyIndicator.show();\r\n        // self_cw._applyQueryDM.click()\r\n        let id = evt.currentTarget.innerText;\r\n        let query = new Query();\r\n        query.where = `${self_cw.field_codigou_dm} = '${id}'`\r\n            // let id_layer = self_cw.config.layer_id_dm;\r\n            // let feature = self_cw.layersMap.getLayerInfoById(id_layer);\r\n        self_cw.feature_dm.setFilter(query.where);\r\n        self_cw.feature_dm.show();\r\n\r\n        self_cw.feature_dm.getLayerObject().then(function(response) {\r\n            // self_cw.map.graphics.clear();\r\n            response.queryFeatures(query, function(results) {\r\n                if (results.features.length) {\r\n                    // let symbol = new SimpleFillSymbol(\r\n                    //     SimpleFillSymbol.STYLE_NULL,\r\n                    //     new SimpleLineSymbol(\r\n                    //         SimpleLineSymbol.STYLE_SOLID,\r\n                    //         new Color([255, 0, 0]), 3\r\n                    //     ),\r\n                    //     new Color([125, 125, 125, 0.35]));\r\n\r\n                    let ext = results.features[0].geometry.getExtent();\r\n                    let center = results.features[0].geometry.getCentroid();\r\n\r\n                    // let graphic = results.features[0].setSymbol(symbol)\r\n                    // self_cw.map.graphics.add(graphic);\r\n                    self_cw.map.infoWindow.setFeatures(results.features);\r\n                    self_cw.map.infoWindow.show(center);\r\n                    // self_cw.map.centerAt(center);\r\n                    // self_cw._openPopupAutocamitcally2(results, center);\r\n                    self_cw.map.setExtent(ext, true);\r\n\r\n                } else {\r\n                    self_cw._showMessage(`${self_cw.nls.none_element} ${id}, ${self_cw.nls.none_reference_map}`);\r\n                }\r\n                self_cw.busyIndicator.hide();\r\n            }, function(error) {\r\n                self_cw._showMessage(`${self_cw.nls.error_query_feature} ${self_cw.feature_dm.title} (${query.where})\\n${error.message}`);\r\n                self_cw.busyIndicator.hide();\r\n            })\r\n        }, function(error) {\r\n            self_cw._showMessage(`${self_cw.nls.error_service} ${self_cw.feature_dm.title}\\n${error.message}`, type = 'error');\r\n            self_cw.busyIndicator.hide();\r\n        })\r\n    },\r\n\r\n    _zoomExtendSelected(feature, whereDefinition) {\r\n        let query = new Query();\r\n        query.where = whereDefinition;\r\n        // let feature = this.layersMap.getLayerInfoById(idService);\r\n        feature.getLayerObject().then(function(results) {\r\n            results.queryExtent(query, function(res) {\r\n                if (res.count) {\r\n                    self_cw.map.setExtent(res.extent, true)\r\n                } else {\r\n                    self_cw._showMessage(`${self_cw.nls.none_element} ${whereDefinition}, ${self_cw.nls.none_reference_map}`);\r\n                }\r\n\r\n            }, function(error) {\r\n                self_cw._showMessage(`${self_cw.nls.error_query_feature} ${feature.title} (${query.where})\\n${error.message}`);\r\n            })\r\n        }, function(error) {\r\n            self_cw._showMessage(`${self_cw.nls.error_service} ${feature.title}\\n${error.message}`, type = 'error');\r\n        });\r\n    },\r\n\r\n    // Proceso que realiza la consulta\r\n    _applyQuery(evt) {\r\n        this.busyIndicator.show();\r\n        self_cw.ap_registros_encontrados_cw.innerHTML = '';\r\n        switch (self_cw.controller_query) {\r\n            case 'dc':\r\n                // self_cw._applyQueryDC()\r\n                self_cw._applyQueryDC2();\r\n                break;\r\n            case 'dm':\r\n                // self_cw._applyQueryDM();\r\n                self_cw._applyQueryDM2()\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    _cloneNode(node) {\r\n        var clone = node.nodeType == 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\r\n        var child = node.firstChild;\r\n        while (child) {\r\n            clone.appendChild(self_cw._cloneNode(child));\r\n            child = child.nextSibling;\r\n        }\r\n        return clone;\r\n    },\r\n\r\n    _rowNode() {\r\n        let node = `<li style=\"display: none;\" data-dojo-attach-point=\"ap_template_registros_resultados_cw\">\r\n                        <a class=\"container_head_registros_cw\">\r\n                            <div class=\"columns is-mobile\">\r\n                                <div class=\"column is-four-fifths title_registros_cw\"></div>\r\n                                <div class=\"column has-text-right\" title=\"Localizar en el mapa\"><span class=\"icon has-text-info\"><i class=\"fas fa-map-marker-alt\"></i></span></div>\r\n                            </div>\r\n                        </a>\r\n                        <ul class=\"detalle_registros_resultados_cw\">\r\n                        </ul>\r\n                    </li>`;\r\n        var parser = new DOMParser();\r\n        var doc = parser.parseFromString(node, 'text/html');\r\n        return doc.body.childNodes[0];\r\n    },\r\n\r\n    _populateResultsDC(arrayResults, enumerate_ini = 1) {\r\n        let fragment = document.createDocumentFragment();\r\n        arrayResults.forEach(function(r, i) {\r\n            let newRow = self_cw._rowNode();\r\n\r\n            newRow.style.display = 'block';\r\n\r\n            let estateLocation = r['FLG_COOROK']\r\n\r\n            if (estateLocation == 0) {\r\n                newRow.getElementsByClassName('column has-text-right')[0].title = '';\r\n                newRow.getElementsByClassName('column has-text-right')[0].innerHTML = '<span class=\"icon has-text-warning\"><i class=\"fas fa-ban\"></i></span>'\r\n                newRow.getElementsByClassName('container_head_registros_cw')[0].classList.remove('container_head_registros_cw');\r\n            }\r\n\r\n            if (estateLocation != 0) {\r\n                // newRow.getElementsByClassName('container_head_registros_cw')[0].id = r[self_cw.field_id];\r\n                newRow.getElementsByClassName('container_head_registros_cw')[0].id = `${r[self_cw.field_id_reinfo]}${r[self_cw.field_id_maestra]}${r[self_cw.field_id_autorizacion]}`\r\n            }\r\n\r\n            // var nodeTitle = dojo.query('.title_registros_cw', newRow)[0]\r\n            newRow.getElementsByClassName('title_registros_cw')[0].innerText = `${enumerate_ini}. ${r[self_cw.field_minero_informal]}`;\r\n\r\n            // Lista campos\r\n\r\n            var fieldsList = []\r\n            fieldsList.push(`<li>${self_cw.nls.field_dc_ruc}: ${r[self_cw.field_m_ruc]}</li>`);\r\n            fieldsList.push(`<li>Estado coordenada: ${self_cw.stateCoord[estateLocation]}</li>`);\r\n\r\n            if (r[self_cw.field_derecho_minero]) {\r\n                fieldsList.push(`<li>${self_cw.nls.field_nombre_dm}: ${r[self_cw.field_derecho_minero]}</li>`);\r\n                fieldsList.push(`<li>${self_cw.nls.field_codigou_dm}: <span title=\"ver derecho minero\" class=\"tag is-link codigou_cw\">${r[self_cw.field_id_unidad]}<span></li>`);\r\n            } else {\r\n                fieldsList.push(`<li>Planta de Beneficio</li>`);\r\n            }\r\n\r\n\r\n\r\n\r\n            fieldsListNode = fieldsList.join('');\r\n\r\n            newRow.getElementsByClassName('detalle_registros_resultados_cw')[0].innerHTML = fieldsListNode;\r\n\r\n            fragment.appendChild(newRow);\r\n            enumerate_ini = enumerate_ini + 1\r\n        });\r\n        self_cw.ap_registros_encontrados_cw.appendChild(fragment);\r\n        dojo.query('.container_head_registros_cw').on('click', self_cw._showPopupRowSelectedClick);\r\n        dojo.query('.codigou_cw').on('click', self_cw._zoomDmExtentToMap);\r\n        this.busyIndicator.hide();\r\n    },\r\n\r\n    _showReinfos(evt) {\r\n        self_cw.busyIndicator.show();\r\n        let id = evt.currentTarget.parentElement.getAttribute('value');\r\n        var elm = dojo.query(`.ul_registro_dc_${id}`);\r\n\r\n        if (evt.currentTarget.parentElement.classList.contains('active')) {\r\n            if (elm.length) {\r\n                evt.currentTarget.parentElement.removeChild(elm[0])\r\n                evt.currentTarget.parentElement.classList.toggle('active')\r\n            }\r\n            self_cw.busyIndicator.hide();\r\n            return;\r\n        }\r\n\r\n        // let id = evt.currentTarget.parentElement.getAttribute('value');\r\n        // let feature = self_cw.layersMap.getLayerInfoById(self_cw.config.layer_id_dc)\r\n\r\n        let query = new Query();\r\n        query.where = `(${self_cw.field_id_unidad} = '${id}') and (${self_cw.field_m_ruc} is not null)`;\r\n\r\n        self_cw.feature_dc.setFilter(query.where);\r\n        self_cw.feature_dc.show();\r\n\r\n        // feature_sys.setFilter(query.where);\r\n        // feature_sys.show();\r\n\r\n        // evt.currentTarget.parentElement.classList.toggle('active')\r\n\r\n        // self_cw.feature_dc.getLayerObject().then(function(response) {\r\n        self_cw.feature_dc_table.getLayerObject().then(function(response) {\r\n            response.queryFeatures(query, function(results) {\r\n                if (results.features.length) {\r\n                    evt.target.parentElement.classList.toggle('active')\r\n                    let rownum = results.features.length;\r\n                    evt.target.innerText = `${self_cw.nls.show_reinfos} (${rownum})`\r\n                    let data = results.features.map((i) => i.attributes);\r\n\r\n                    let lidata = data.map((i, index) => `<li class=\"registro_dc\" id=\"${i[self_cw.field_id_reinfo]}${i[self_cw.field_id_maestra]}${i[self_cw.field_id_autorizacion]}\"><a>${index + 1}. ${i[self_cw.field_m_ruc]} - ${i[self_cw.field_tipo_persona].toLowerCase() == 'juridica' ? i[self_cw.field_minero_informal_rep] : i[self_cw.field_minero_informal]}</a></li>`)\r\n                    let lidataString = lidata.join('');\r\n                    let ulnode = dojo.create('ul');\r\n                    ulnode.innerHTML = lidataString;\r\n                    dojo.addClass(ulnode, `ul_registro_dc_${id}`)\r\n                    evt.target.parentElement.appendChild(ulnode);\r\n                    dojo.query('.registro_dc').on('click', self_cw._showPopupRowSelectedClick)\r\n                } else {\r\n                    evt.target.innerText = `${self_cw.nls.show_reinfos} (0)`\r\n                    self_cw._showMessage(self_cw.nls.none_element_pl);\r\n                };\r\n                self_cw.busyIndicator.hide();\r\n            }, function(error) {\r\n                self_cw._showMessage(`${self_cw.nls.error_query_feature} ${feature.title} (${query.where})\\n${error.message}`);\r\n                self_cw.busyIndicator.hide();\r\n            })\r\n        }, function(error) {\r\n            self_cw._showMessage(`${self_cw.nls.error_service} ${feature.title}\\n${error.message}`, type = 'error')\r\n            self_cw.busyIndicator.hide();\r\n        })\r\n    },\r\n\r\n    _populateResultsDM(arrayResults, enumerate_ini = 1) {\r\n        let fragment = document.createDocumentFragment();\r\n        arrayResults.forEach(function(r, i) {\r\n            // if (self_cw.temporal_class_results) {\r\n            //     var newRow = self_cw.temporal_class_results;\r\n            // } else {\r\n            //     var newRow = dojo.clone(self_cw.ap_template_registros_resultados_cw);\r\n            // }\r\n            let newRow = self_cw._rowNode();\r\n\r\n            newRow.style.display = 'block';\r\n\r\n            // var nodeTitle = dojo.query('.title_registros_cw', newRow)[0]\r\n            newRow.getElementsByClassName('title_registros_cw')[0].innerText = `${enumerate_ini}. ${self_cw.nls.field_codigou_dm}: ${r[self_cw.field_codigou_dm]}`;\r\n            // newRow.getElementsByClassName('title_registros_cw')[0].id = r[self_cw.field_codigou_dm];\r\n            newRow.getElementsByClassName('container_head_registros_cw')[0].id = r[self_cw.field_codigou_dm];\r\n            // dojo.connect(nodeTitle, 'onclick', self_cw._showPopupRowSelectedClickDM);\r\n\r\n            // Lista campos\r\n\r\n            var fieldsList = []\r\n            fieldsList.push(`<li>${self_cw.nls.field_nombre_dm}: ${r[self_cw.field_concesion_dm]}</li>`);\r\n            fieldsList.push(`<li>${self_cw.nls.field_sustancia_dm}: ${r[self_cw.field_sustancia_dm]}</li>`);\r\n            fieldsList.push(`<li value=\"${r[self_cw.field_codigou_dm]}\"><span class=\"tag is-link reinfos_cw\">${self_cw.nls.show_reinfos}<span></li>`);\r\n\r\n            fieldsListNode = fieldsList.join('');\r\n\r\n            newRow.getElementsByClassName('detalle_registros_resultados_cw')[0].innerHTML = fieldsListNode;\r\n\r\n            fragment.appendChild(newRow);\r\n            enumerate_ini = enumerate_ini + 1;\r\n        })\r\n        self_cw.ap_registros_encontrados_cw.appendChild(fragment);\r\n        dojo.query('.container_head_registros_cw').on('click', self_cw._showPopupRowSelectedClickDM);\r\n        dojo.query('.reinfos_cw').on('click', self_cw._showReinfos);\r\n        this.busyIndicator.hide();\r\n    },\r\n\r\n    _showPopupRowSelectedClick(evt) {\r\n        self_cw.busyIndicator.show();\r\n        let id_row = evt.currentTarget.id;\r\n\r\n        let query = new Query();\r\n        console.log(query);\r\n        // query.where = `${self_cw.field_id} = '${id_row}'`\r\n\r\n\r\n        query.where = `${self_cw.field_id_reinfo}||${self_cw.field_id_maestra}||${self_cw.field_id_autorizacion} = '${id_row}'`\r\n\r\n        self_cw.feature_dc.setFilter(query.where)\r\n\r\n        self_cw.feature_dc.layerObject.selectFeatures(query, FeatureLayer.SELECTION_NEW)\r\n            .then(\r\n                function(response) {\r\n                    let center = response[0].geometry;\r\n                    if (!center) {\r\n                        self_cw._showMessage(self_cw.nls.error_none_geometry);\r\n                        self_cw.busyIndicator.hide();\r\n                        return;\r\n                    }\r\n\r\n                    self_cw.map.infoWindow.setFeatures(response);\r\n                    self_cw.map.infoWindow.show(center);\r\n                    self_cw.map.centerAndZoom(center, 18)\r\n                    self_cw.busyIndicator.hide();\r\n                    // self_cw.map.centerAt(center);\r\n\r\n                },\r\n                function(error) {\r\n                    self_cw._showMessage(`${self_cw.nls.error_query_feature} ${self_cw.feature_dc.title} (${query.where})\\n${error.message}`);\r\n                    self_cw.busyIndicator.hide();\r\n                })\r\n            .catch(function(error) {\r\n                self_cw._showMessage(`${self_cw.nls.error_query_feature} ${self_cw.feature_dc.title}\\n${error.message}`);\r\n                self_cw.busyIndicator.hide();\r\n            })\r\n\r\n    },\r\n\r\n\r\n\r\n    _showPopupRowSelectedClickDM(evt) {\r\n        self_cw.busyIndicator.show();\r\n        let id = evt.currentTarget.id;\r\n\r\n        let query = new Query();\r\n        query.where = `${self_cw.field_codigou_dm} = '${id}'`;\r\n        query.returnGeometry = true;\r\n        query.outFields = ['*'];\r\n\r\n        // console.log(query)\r\n        self_cw.feature_dm.setFilter(query.where);\r\n\r\n        // let queryTask = new QueryTask(self_cw.feature_dm.getUrl())\r\n\r\n        // queryTask.execute(query,\r\n\r\n        self_cw.feature_dm.layerObject.queryFeatures(\r\n                query,\r\n                function(response) {\r\n                    try {\r\n                        let center = response.features[0].geometry.getCentroid();\r\n                        if (!center) {\r\n                            self_cw._showMessage(self_cw.nls.error_none_geometry);\r\n                            self_cw.busyIndicator.hide();\r\n                            return;\r\n                        };\r\n                        self_cw.map.centerAndZoom(center, 13)\r\n                        self_cw.map.infoWindow.setFeatures(response.features);\r\n                        self_cw.map.infoWindow.show(center);\r\n                        self_cw.busyIndicator.hide();\r\n                    } catch (error) {\r\n                        console.log(error.message)\r\n                        self_cw.busyIndicator.hide();\r\n                    }\r\n                },\r\n                function(error) {\r\n                    self_cw._showMessage(`${self_cw.nls.error_query_feature} ${self_cw.feature_dm.title} (${query.where})\\n${error.message}`);\r\n                    self_cw.busyIndicator.hide();\r\n                }\r\n            )\r\n            // self_cw.feature_dm.layerObject.selectFeatures(query, FeatureLayer.SELECTION_NEW)\r\n            //     .then(\r\n            //         function(response) {\r\n            //             try {\r\n            //                 let center = response[0].geometry.getCentroid();\r\n            //                 if (!center) {\r\n            //                     self_cw._showMessage(self_cw.nls.error_none_geometry);\r\n            //                     return;\r\n            //                 };\r\n            //                 self_cw.map.centerAndZoom(center, 13)\r\n            //                 self_cw.map.infoWindow.setFeatures(response);\r\n            //                 self_cw.map.infoWindow.show(center);\r\n            //             } catch (error) {\r\n            //                 console.log(error.message)\r\n            //             }\r\n            //         },\r\n            //         function(error) {\r\n            //             self_cw._showMessage(`${self_cw.nls.error_query_feature} ${self_cw.feature_dm.title} (${query.where})\\n${error.message}`);\r\n            //         }\r\n            //     ).catch(\r\n            //         function(error) {\r\n            //             self_cw._showMessage(`${self_cw.nls.error_query_feature} ${self_cw.feature_dm.title} (${query.where})\\n${error.message}`);\r\n            //         }\r\n            //     )\r\n    },\r\n\r\n    startup() {\r\n        this.inherited(arguments);\r\n        console.log('Consulta_wgt::startup');\r\n        this.busyIndicator = BusyIndicator.create({\r\n            target: this.domNode.parentNode.parentNode.parentNode,\r\n            backgroundOpacity: 0\r\n        });\r\n        this.busyIndicator.show();\r\n\r\n        // var panel = this.getPanel();\r\n        // var pos = panel.position;\r\n        // pos.width = 450;\r\n        // panel.setPosition(pos);\r\n        // panel.panelManager.normalizePanel(panel);\r\n\r\n\r\n        self_cw._addEventToTabsOptions();\r\n        self_cw._addEventToLayerQuery();\r\n        self_cw._getDataByTipoPersona();\r\n        self_cw._getDataByDepartamento()\r\n        this.busyIndicator.hide();\r\n    },\r\n    onOpen() {\r\n        console.log('Consulta_wgt::onOpen');\r\n    },\r\n\r\n    _cleanMap() {\r\n        this.busyIndicator.show()\r\n            // this.map.graphics.clear();\r\n        let whereDefinition = '1=1'\r\n        lyr_dc = this.layersMap.getLayerInfoById(this.config.layer_id_dc);\r\n        lyr_dm = this.layersMap.getLayerInfoById(this.config.layer_id_dm);\r\n        lyr_dc.show();\r\n        lyr_dm.hide();\r\n        lyr_dc.setFilter(whereDefinition);\r\n        lyr_dm.setFilter(whereDefinition);\r\n        this.busyIndicator.hide()\r\n        this.container_resultados_opcion_cw.classList.remove('active');\r\n        this.ap_none_resultados_opcion_cw.hidden = false;\r\n        this.controller_layer_query = false;\r\n    },\r\n\r\n    onClose() {\r\n        console.log('Consulta_wgt::onClose');\r\n        if (this.controller_layer_query) {\r\n            this._showMessage(this.nls.clean_map_question, type = 'question')\r\n        }\r\n    },\r\n    // onMinimize(){\r\n    //   console.log('Consulta_wgt::onMinimize');\r\n    // },\r\n    // onMaximize(){\r\n    //   console.log('Consulta_wgt::onMaximize');\r\n    // },\r\n    // onSignIn(credential){\r\n    //   console.log('Consulta_wgt::onSignIn', credential);\r\n    // },\r\n    // onSignOut(){\r\n    //   console.log('Consulta_wgt::onSignOut');\r\n    // }\r\n    // onPositionChange(){\r\n    //   console.log('Consulta_wgt::onPositionChange');\r\n    // },\r\n    // resize(){\r\n    //   console.log('Consulta_wgt::resize');\r\n    // }\r\n\r\n    _queryDcGeneral() {\r\n        let query = new Query();\r\n        query.where = self_cw.whereDefinition;\r\n        // var feature_dc = self_cw.layersMap.getLayerInfoById(self_cw.config.layer_id_dc);\r\n        self_cw.feature_dc.hide();\r\n        self_cw.feature_dc.setFilter('');\r\n        self_cw.feature_dc_table.getLayerObject()\r\n            .then(\r\n                function(response) {\r\n                    response.queryCount(query, function(results) {\r\n                        self_cw.numero_registros = results\r\n                        self_cw.ap_indicador_resultados_cw.innerText = results;\r\n                        self_cw.ap_titulo_resultados_cw.innerText = self_cw.titulo_consulta.innerText + ' encontrados';\r\n                        self_cw._generatePages();\r\n                        self_cw._queryDcByPage();\r\n                    }, function(error) {\r\n                        self_cw._showMessage(error.message, type = 'error')\r\n                    })\r\n                })\r\n            .catch((error) => {\r\n                self_cw._showMessage(error.message, type = 'error')\r\n                self_cw.busyIndicator.hide();\r\n            });\r\n\r\n    },\r\n\r\n    queryDmGeneral() {\r\n        let query = new Query();\r\n        query.where = self_cw.whereDefinition;\r\n        self_cw.feature_dm.hide();\r\n        self_cw.feature_dm.setFilter('');\r\n        self_cw.feature_dm.getLayerObject()\r\n            .then(\r\n                function(response) {\r\n                    response.queryIds(query, function(results) {\r\n                        let count = results ? results.length : 0\r\n                        self_cw.numero_registros = count\r\n                        self_cw.ap_indicador_resultados_cw.innerText = count;\r\n                        self_cw.ap_titulo_resultados_cw.innerText = self_cw.titulo_consulta.innerText + ' encontrados';\r\n\r\n                        self_cw._generatePages();\r\n                        self_cw._queryDmByPage();\r\n\r\n                    }, function(error) {\r\n                        self_cw._showMessage(self_cw.nls.error_query_feature + '\\n' + error.message, type = 'error')\r\n                        self_cw.busyIndicator.hide();\r\n                    })\r\n                })\r\n            .catch((error) => {\r\n                self_cw._showMessage(error.message, type = 'error')\r\n                self_cw.busyIndicator.hide();\r\n            });\r\n    },\r\n\r\n    _queryDcByPage(n = 1) {\r\n        // self_cw.feature_dc_sys.hide();\r\n        self_cw.busyIndicator.show();\r\n\r\n        if (self_cw.numero_registros == 0) {\r\n            self_cw.busyIndicator.hide();\r\n            self_cw.ap_titulo_registros_resultados_cw.innerText = '';\r\n            self_cw.ap_resultados_cw.click();\r\n            return;\r\n        };\r\n\r\n        let query = new Query();\r\n        query.returnGeometry = false;\r\n        query.outFields = ['*'];\r\n        query.where = self_cw.whereDefinition;\r\n        query.num = self_cw.registros_pagina;\r\n        query.start = n == 1 ? 0 : (n - 1) * self_cw.registros_pagina;\r\n        query.orderByFields = [self_cw.field_id];\r\n\r\n        var start = query.start + 1\r\n        var fin = query.start + query.num > self_cw.numero_registros ? self_cw.numero_registros : self_cw.pagina_actual * query.num\r\n        self_cw.ap_titulo_registros_resultados_cw.innerText = String(start) + ' - ' + String(fin)\r\n\r\n        self_cw.feature_dc.hide();\r\n        self_cw.feature_dc.setFilter('');\r\n\r\n        // Realizando el query a la capa\r\n        self_cw.feature_dc_table.layerObject.queryFeatures(query, function(result) {\r\n            var rowcount = result.features.length;\r\n            if (rowcount) {\r\n                self_cw.controller_layer_query = true;\r\n            }\r\n            // self_cw.ap_indicador_resultados_cw.innerText = rowcount;\r\n            // self_cw.ap_titulo_resultados_cw.innerText = self_cw.titulo_consulta.innerText + ' encontrados';\r\n\r\n            var data = result.features.map((i) => i.attributes);\r\n\r\n            let ids = data.map((i) => `${i[self_cw.field_id_reinfo]}${i[self_cw.field_id_maestra]}${i[self_cw.field_id_autorizacion]}`)\r\n            let ids_join = ids.join(\"', '\")\r\n            let query_ids = `${self_cw.field_id_reinfo}||${self_cw.field_id_maestra}||${self_cw.field_id_autorizacion} IN ('${ids_join}')`\r\n                // let query_ids = self_cw.field_id + ` IN (' + ${ids_join} + ')`\r\n\r\n\r\n            self_cw.feature_dc.setFilter(query_ids);\r\n            self_cw.feature_dc.show();\r\n\r\n            // self_cw.feature_dc_sys.setFilter(query_ids);\r\n            // self_cw.feature_dc_sys.show();\r\n\r\n            self_cw._populateResultsDC(data, start)\r\n\r\n            self_cw.ap_none_resultados_opcion_cw.hidden = true;\r\n            var class_list_container_resultados = self_cw.container_resultados_opcion_cw.classList;\r\n            if (!class_list_container_resultados.contains('active')) {\r\n                self_cw.container_resultados_opcion_cw.classList.toggle('active');\r\n            }\r\n            self_cw.ap_resultados_cw.click();\r\n            self_cw.busyIndicator.hide();\r\n        });\r\n\r\n        self_cw.feature_dc.layerObject.queryExtent(query, (results) => {\r\n            if (results.count) {\r\n                self_cw.map.setExtent(results.extent, true);\r\n            }\r\n        });\r\n\r\n        if (self_cw.numero_paginas <= 1) {\r\n            self_cw.ap_anterior_page_cw.setAttribute('disabled', true)\r\n            self_cw.ap_siguiente_page_cw.setAttribute('disabled', true)\r\n            return;\r\n        }\r\n\r\n        if (n == 1) {\r\n            self_cw.ap_anterior_page_cw.setAttribute('disabled', true)\r\n            self_cw.ap_siguiente_page_cw.removeAttribute('disabled')\r\n        } else if (n == self_cw.numero_paginas) {\r\n            self_cw.ap_anterior_page_cw.removeAttribute('disabled')\r\n            self_cw.ap_siguiente_page_cw.setAttribute('disabled', true)\r\n        } else {\r\n            self_cw.ap_anterior_page_cw.removeAttribute('disabled')\r\n            self_cw.ap_siguiente_page_cw.removeAttribute('disabled')\r\n        }\r\n\r\n    },\r\n\r\n    _queryDmByPage(n = 1) {\r\n        // self_cw.feature_dc_sys.hide();\r\n        self_cw.busyIndicator.show();\r\n\r\n        if (self_cw.numero_registros == 0) {\r\n            self_cw.busyIndicator.hide();\r\n            self_cw.ap_titulo_registros_resultados_cw.innerText = '';\r\n            self_cw.ap_resultados_cw.click();\r\n            return;\r\n        };\r\n\r\n        let query = new Query();\r\n        query.where = self_cw.whereDefinition;\r\n        query.returnGeometry = false;\r\n        query.num = self_cw.registros_pagina;\r\n        query.start = n == 1 ? 0 : (n - 1) * self_cw.registros_pagina;\r\n        query.orderByFields = [self_cw.field_codigou_dm];\r\n\r\n        var start = query.start + 1\r\n        var fin = query.start + query.num > self_cw.numero_registros ? self_cw.numero_registros : self_cw.pagina_actual * query.num\r\n        self_cw.ap_titulo_registros_resultados_cw.innerText = String(start) + ' - ' + String(fin)\r\n\r\n        self_cw.feature_dm.hide();\r\n        self_cw.feature_dm.setFilter('');\r\n\r\n        // Realizando el query a la capa\r\n        self_cw.feature_dm.layerObject.queryFeatures(query, function(result) {\r\n            let rowcount = result.features.length;\r\n            if (rowcount) {\r\n                self_cw.controller_layer_query = true;\r\n            }\r\n\r\n            let data = result.features.map((i) => i.attributes);\r\n\r\n            let ids = data.map((i) => i[self_cw.field_codigou_dm])\r\n            let ids_join = ids.join(\"', '\")\r\n            let query_ids = self_cw.field_codigou_dm + \" IN ('\" + ids_join + \"')\"\r\n\r\n\r\n            self_cw.feature_dm.setFilter(query_ids);\r\n            self_cw.feature_dm.show();\r\n\r\n            self_cw._populateResultsDM(data, start);\r\n\r\n            self_cw.ap_none_resultados_opcion_cw.hidden = true;\r\n            var class_list_container_resultados = self_cw.container_resultados_opcion_cw.classList;\r\n            if (!class_list_container_resultados.contains('active')) {\r\n                self_cw.container_resultados_opcion_cw.classList.toggle('active');\r\n            }\r\n            self_cw.ap_resultados_cw.click();\r\n            self_cw.busyIndicator.hide();\r\n        });\r\n\r\n        self_cw.feature_dm.layerObject.queryExtent(query, (results) => {\r\n            if (results.count) {\r\n                self_cw.map.setExtent(results.extent, true);\r\n            }\r\n        });\r\n\r\n        if (self_cw.numero_paginas <= 1) {\r\n            self_cw.ap_anterior_page_cw.setAttribute('disabled', true)\r\n            self_cw.ap_siguiente_page_cw.setAttribute('disabled', true)\r\n            return;\r\n        }\r\n\r\n        if (n == 1) {\r\n            self_cw.ap_anterior_page_cw.setAttribute('disabled', true)\r\n            self_cw.ap_siguiente_page_cw.removeAttribute('disabled')\r\n        } else if (n == self_cw.numero_paginas) {\r\n            self_cw.ap_anterior_page_cw.removeAttribute('disabled')\r\n            self_cw.ap_siguiente_page_cw.setAttribute('disabled', true)\r\n        } else {\r\n            self_cw.ap_anterior_page_cw.removeAttribute('disabled')\r\n            self_cw.ap_siguiente_page_cw.removeAttribute('disabled')\r\n        }\r\n    },\r\n\r\n    _queryDcByPageEvent(evt) {\r\n        // Obtiene el numero de la pagina\r\n        let page = evt.target.innerText;\r\n\r\n        self_cw.pagina_actual = parseInt(page);\r\n        self_cw.ap_registros_encontrados_cw.innerHTML = '';\r\n\r\n        // Filtro de elementos\r\n        self_cw._queryDcByPage(self_cw.pagina_actual);\r\n\r\n        // Remover la pagina anterior seleccionada\r\n        dojo.query('.is-current').toggleClass('is-current');\r\n\r\n        // Activar la pagina actual seleccionada\r\n        evt.target.classList.toggle('is-current')\r\n    },\r\n\r\n    _queryDmByPageEvent(evt) {\r\n        // Obtiene el numero de la pagina\r\n        let page = evt.target.innerText;\r\n\r\n        self_cw.pagina_actual = parseInt(page);\r\n        self_cw.ap_registros_encontrados_cw.innerHTML = '';\r\n\r\n        // Filtro de elementos\r\n        self_cw._queryDmByPage(self_cw.pagina_actual);\r\n\r\n        // Remover la pagina anterior seleccionada\r\n        dojo.query('.is-current').toggleClass('is-current');\r\n\r\n        // Activar la pagina actual seleccionada\r\n        evt.target.classList.toggle('is-current')\r\n    },\r\n\r\n    _nextPage(evt) {\r\n        self_cw.pagina_actual = self_cw.pagina_actual == self_cw.numero_paginas ? self_cw.pagina_actual : self_cw.pagina_actual + 1;\r\n\r\n        if (!self_cw.grupos_paginas[self_cw.grupo_actual].includes(self_cw.pagina_actual)) {\r\n            self_cw.grupo_actual = self_cw.grupo_actual == self_cw.grupos_paginas.length - 1 ? self_cw.grupo_actual : self_cw.grupo_actual + 1;\r\n            self_cw._generatePagesFromArray(self_cw.grupos_paginas[self_cw.grupo_actual], self_cw.pagina_actual)\r\n        }\r\n        dojo.query(`#page_${self_cw.pagina_actual}_cw`)[0].click();\r\n    },\r\n\r\n    _backPage(evt) {\r\n        self_cw.pagina_actual = self_cw.pagina_actual == 1 ? self_cw.pagina_actual : self_cw.pagina_actual - 1;\r\n        if (!self_cw.grupos_paginas[self_cw.grupo_actual].includes(self_cw.pagina_actual)) {\r\n            self_cw.grupo_actual = self_cw.grupo_actual == 0 ? self_cw.grupo_actual : self_cw.grupo_actual - 1;\r\n            self_cw._generatePagesFromArray(self_cw.grupos_paginas[self_cw.grupo_actual], self_cw.pagina_actual)\r\n        }\r\n        dojo.query(`#page_${self_cw.pagina_actual}_cw`)[0].click();\r\n    },\r\n\r\n    _generatePages() {\r\n        if (self_cw.numero_registros == 0) {\r\n            self_cw.ap_pagination_cw.classList.remove('paginationActive');\r\n            self_cw.ap_pagination_list_cw.innerHTML = '';\r\n            self_cw.busyIndicator.hide();\r\n            return\r\n        }\r\n        if (!self_cw.ap_pagination_cw.classList.contains('paginationActive')) {\r\n            self_cw.ap_pagination_cw.classList.add('paginationActive');\r\n        }\r\n        self_cw.numero_paginas = Math.ceil(self_cw.numero_registros / self_cw.registros_pagina);\r\n        self_cw.grupos_paginas = self_cw._generateGroupsPages(self_cw.numero_paginas, self_cw.factor);\r\n        self_cw.grupo_actual = 0 // Es el primer grupo\r\n        self_cw.pagina_actual = 1 // Segundo parametro es 1 porque es la primera pagina\r\n\r\n        self_cw._generatePagesFromArray(self_cw.grupos_paginas[self_cw.grupo_actual], self_cw.pagina_actual);\r\n    },\r\n\r\n    _generateGroupsPages(numero_paginas, factor) {\r\n        let paginas = Array.from(Array(numero_paginas + 1).keys()).slice(1);\r\n        let grupos = Math.ceil(numero_paginas / factor);\r\n        var grupos_array = Array.from(Array(grupos).keys());\r\n        let grupos_paginas = grupos_array.map((i) => paginas.slice(i * factor, (i + 1) * factor));\r\n        return grupos_paginas;\r\n    },\r\n\r\n    _generatePagesFromArray(pages, val) {\r\n        let pages_html_array = [];\r\n        pages.forEach(function(n) {\r\n            let class_element = n == val ? 'pagination-link is-current pages_result_cw' : 'pagination-link pages_result_cw'\r\n            pages_html_array.push(`<li><a id=\"page_${n}_cw\" class=\"${class_element}\" aria-label=\"Pagina ${n}\">${n}</a></li>`)\r\n        });\r\n\r\n        if (self_cw.grupo_actual == 0 && self_cw.grupos_paginas.length == 1) {\r\n            // No hace nada\r\n        } else if (self_cw.grupo_actual == 0 && self_cw.grupos_paginas.length > 1) {\r\n            pages_html_array.push('<li><span class=\"pagination-ellipsis\">&hellip;</span></li>')\r\n        } else if (self_cw.grupo_actual == self_cw.grupos_paginas.length - 1) {\r\n            pages_html_array.splice(0, 0, '<li><span class=\"pagination-ellipsis\">&hellip;</span></li>');\r\n        } else {\r\n            pages_html_array.push('<li><span class=\"pagination-ellipsis\">&hellip;</span></li>');\r\n            pages_html_array.splice(0, 0, '<li><span class=\"pagination-ellipsis\">&hellip;</span></li>');\r\n        }\r\n\r\n        pages_html = pages_html_array.join('');\r\n        self_cw.ap_pagination_list_cw.innerHTML = pages_html;\r\n\r\n        if (self_cw.controller_query == 'dc') {\r\n            dojo.query('.pages_result_cw').on('click', self_cw._queryDcByPageEvent);\r\n        } else if (self_cw.controller_query == 'dm') {\r\n            dojo.query('.pages_result_cw').on('click', self_cw._queryDmByPageEvent);\r\n        }\r\n    },\r\n\r\n    _applyQueryDC2() {\r\n        self_cw.feature_dm.hide();\r\n        let whereDefinitionArray = [];\r\n        self_cw.whereDefinition = '';\r\n\r\n        // let ruc_dc = `(${self_cw.field_m_ruc} is not null)`;\r\n\r\n        // if (self_cw.input_ruc_dc_cw.value != '') {\r\n        //     ruc_dc = `(${self_cw.field_m_ruc} like '%${self_cw.input_ruc_dc_cw.value}%' and ${ruc_dc})`;\r\n        // }\r\n\r\n        if (self_cw.input_ruc_dc_cw.value != '') {\r\n            let ruc_dc = `(${self_cw.field_m_ruc} like '%${self_cw.input_ruc_dc_cw.value}%' and (${self_cw.field_m_ruc} is not null))`;\r\n            whereDefinitionArray.push(ruc_dc);\r\n        }\r\n\r\n        // whereDefinitionArray.push(ruc_dc);\r\n\r\n        if (self_cw.input_nombre_dc_cw.value != '') {\r\n            let nombre_dc = `(lower(${self_cw.field_minero_informal}) like lower('%${self_cw.input_nombre_dc_cw.value}%'))`;\r\n            whereDefinitionArray.push(nombre_dc);\r\n        }\r\n\r\n        // let nombre_dc = `(lower(${self_cw.field_minero_informal}) like lower('%${self_cw.input_nombre_dc_cw.value}%'))`;\r\n        // whereDefinitionArray.push(nombre_dc);\r\n\r\n        // original\r\n        if (self_cw.select_tipo_persona_cw.value != '') {\r\n            let tipo_persona_dc = `(${self_cw.field_tipo_persona} like '%${self_cw.select_tipo_persona_cw.value}%')`;\r\n            whereDefinitionArray.push(tipo_persona_dc);\r\n        };\r\n\r\n        if (self_cw.input_codigou_dc_cw.value != '') {\r\n            let codigou_dc = `(upper(${self_cw.field_id_unidad}) like upper('%${self_cw.input_codigou_dc_cw.value}%'))`;\r\n            whereDefinitionArray.push(codigou_dc);\r\n        }\r\n\r\n        // let codigou_dc = `(upper(${self_cw.field_id_unidad}) like upper('%${self_cw.input_codigou_dc_cw.value}%'))`;\r\n        // whereDefinitionArray.push(codigou_dc);\r\n\r\n        if (self_cw.input_nombre_dm_dc_cw.value != '') {\r\n            let nombredm_dc = `(lower(${self_cw.field_derecho_minero}) like lower('%${self_cw.input_nombre_dm_dc_cw.value}%'))`;\r\n            whereDefinitionArray.push(nombredm_dc);\r\n        }\r\n\r\n        // let nombredm_dc = `(lower(${self_cw.field_derecho_minero}) like lower('%${self_cw.input_nombre_dm_dc_cw.value}%'))`;\r\n        // whereDefinitionArray.push(nombredm_dc);\r\n        if (self_cw.controller_ubigeo != '') {\r\n            let ubigeo_dc = `(${self_cw.field_id_ubigeo_inei} like '${self_cw.controller_ubigeo}%')`;\r\n            whereDefinitionArray.push(ubigeo_dc);\r\n        }\r\n\r\n\r\n        // let ubigeo_dc = `(${self_cw.field_id_ubigeo_inei} like '${self_cw.controller_ubigeo}%')`;\r\n        // whereDefinitionArray.push(ubigeo_dc);\r\n\r\n        if (whereDefinitionArray.length == 0) {\r\n            self_cw.whereDefinition = self_cw.iniClause;\r\n        } else {\r\n            self_cw.whereDefinition = whereDefinitionArray.join(' and ');\r\n        }\r\n\r\n        // self_cw.whereDefinition = whereDefinitionArray.join(' and ');\r\n        // self_cw.whereDefinition = \"DEPARTAMENTO = 'AREQUIPA'\"\r\n        self_cw._queryDcGeneral();\r\n    },\r\n\r\n    _applyQueryDM2() {\r\n        self_cw.feature_dc.hide();\r\n        let whereDefinitionArray = []\r\n        self_cw.whereDefinition = ''\r\n\r\n        var codigou_dm = `(upper(${self_cw.field_codigou_dm}) like upper('%${self_cw.input_codigou_dm_cw.value}%'))`;\r\n        whereDefinitionArray.push(codigou_dm)\r\n\r\n        var nombredm_dm = `(lower(${self_cw.field_concesion_dm}) like lower('%${self_cw.input_nombre_dm_cw.value}%'))`;\r\n        whereDefinitionArray.push(nombredm_dm)\r\n\r\n        self_cw.whereDefinition = whereDefinitionArray.join(' and ');\r\n\r\n        self_cw.queryDmGeneral();\r\n    },\r\n});"]}