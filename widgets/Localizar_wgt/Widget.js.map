{"version":3,"sources":["../../../widgets/Localizar_wgt/Widget.js"],"names":["declare","BaseWidget","SpatialReference","ProjectParameters","GeometryService","Point","Polygon","SimpleFillSymbol","SimpleLineSymbol","SimpleMarkerSymbol","Color","GraphicsLayer","Graphic","Message","InfoTemplate","TextSymbol","Font","BusyIndicator","AreasAndLengthsParameters","baseClass","tabSelected","obj_resultados","obj_index","obj_resultados_xls","postCreate","inherited","arguments","console","log","self_lw","_showMessage","message","type","messagebox","titleLabel","nls","_widgetLabel","buttons","label","onClick","lang","hitch","close","_cleanMap","_tabToggleForm","evt","currentTarget","id","classList","contains","dojo","query","forEach","node","container_option","toggle","remove","_validateCoordinateNumber_lw","val","value","srid","select_punto_opcion_lw","config","crs","epsg","replace","_populateSelectSistemReference_lw","i","opt","document","createElement","text","name_epsg","add","select_poligono_opcion_lw","innerHTML","_applyGraphic","_graphPoint","_graphPolygon","err_sistema_referencial","ap_select_punto_lw","src","x","ap_input_x_lw","_validateCoordX","ap_help_x_lw","innerText","allowed_lon_values","allowed_este_values","y","ap_input_y_lw","_validateCoordY","ap_help_y_lw","allowed_lat_values","allowed_norte_values","geometryService","url_geometry_Server","spatialReference","wkid","parseInt","point","parseFloat","pointTransform","parameters","geometries","normalize","outSR","map","transformForward","project","on","results","symbol","STYLE_SQUARE","STYLE_SOLID","graphic","geometry","err_referenciar_coordenada","name","push","graphicLayer","font","STYLE_NORMAL","VARIANT_NORMAL","WEIGHT_BOLD","txtSym","setOffset","setAlign","ALIGN_END","setHaloColor","setHaloSize","graphicLabel","addLayer","setInfoTemplate","infoWindow","setTitle","getTitle","setContent","getContent","show","centerAndZoom","_addResultados","ap_none_resultados_opcion_lw","hidden","addClass","ap_resultados_lw","click","error","busyIndicator_lw","ap_upload_file_lw","err_formato_invalido","hide","ap_select_poligono_lw","rings","slice","polygonJson","polygon","polygonTransform","STYLE_NULL","center","getCentroid","areasAndLengthParams","lengthUnit","UNIT_METERS","areaUnit","UNIT_HECTARES","calculationType","polygons","areasAndLengths","then","area","areas","toFixed","perimetro","lengths","setExtent","_extent","messageErr","err_coordenadas_xlsx","response","i_class","icon_elm","tr","create","td_array","tds","join","style","cursor","ap_resultados_body_lw","appendChild","_zoomToExtentByResult","_editaNameResult","_deleteResult","lyr","getLayer","graphics","refresh","elem","removeLayer","parentNode","removeChild","_uploadFile","files","endsWith","readXlsxFile","data","ap_upload_file_name_lw","ap_container_upload_file_lw","ap_help_message_lw","suc_cargar_archivo","catch","err_cargar_archivo","_onChangeSelectSRC","target","placeholder","ap_input_label_x_lw","title_longitud","ap_input_label_y_lw","title_latitud","title_este","title_norte","val_x","val_y","startup","domNode","backgroundOpacity"],"mappings":"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","file":"Widget.js","sourcesContent":["import declare from 'dojo/_base/declare';\r\nimport BaseWidget from 'jimu/BaseWidget';\r\nimport SpatialReference from \"esri/SpatialReference\";\r\nimport ProjectParameters from \"esri/tasks/ProjectParameters\";\r\nimport GeometryService from 'esri/tasks/GeometryService';\r\nimport Point from \"esri/geometry/Point\";\r\nimport Polygon from 'esri/geometry/Polygon';\r\nimport SimpleFillSymbol from 'esri/symbols/SimpleFillSymbol';\r\nimport SimpleLineSymbol from 'esri/symbols/SimpleLineSymbol';\r\nimport SimpleMarkerSymbol from 'esri/symbols/SimpleMarkerSymbol';\r\nimport Color from 'dojo/_base/Color';\r\nimport GraphicsLayer from \"esri/layers/GraphicsLayer\";\r\nimport Graphic from 'esri/graphic';\r\nimport Message from \"jimu/dijit/Message\";\r\nimport InfoTemplate from \"esri/InfoTemplate\";\r\nimport TextSymbol from \"esri/symbols/TextSymbol\";\r\nimport Font from \"esri/symbols/Font\";\r\nimport BusyIndicator from 'esri/dijit/util/busyIndicator';\r\nimport AreasAndLengthsParameters from \"esri/tasks/AreasAndLengthsParameters\";\r\nimport 'https://unpkg.com/read-excel-file@4.x/bundle/read-excel-file.min.js';\r\n\r\n// To create a widget, you need to derive from BaseWidget.\r\nexport default declare([BaseWidget], {\r\n\r\n    // Developer: Ing. Geógrafo Daniel Aguado H.\r\n    // linkedin: https://www.linkedin.com/in/danielgis\r\n    // WebSite: https://danielgis.github.io/\r\n\r\n    // Custom widget code goes here\r\n\r\n    baseClass: 'localizar-wgt',\r\n    tabSelected: 'punto',\r\n    obj_resultados: [],\r\n    obj_index: 0,\r\n    obj_resultados_xls: {},\r\n\r\n    // add additional properties here\r\n\r\n    // methods to communication with app container:\r\n    postCreate() {\r\n        this.inherited(arguments);\r\n        console.log('Localizar_wgt::postCreate');\r\n        self_lw = this;\r\n    },\r\n\r\n    _showMessage(message, type = 'message') {\r\n        switch (type) {\r\n            case 'question':\r\n                let messagebox = new Message({\r\n                    type: type,\r\n                    titleLabel: `Widget ${this.nls._widgetLabel}: ${type}`,\r\n                    message: message,\r\n                    buttons: [{\r\n                        label: 'SI',\r\n                        onClick: lang.hitch(this, lang.hitch(this, function() {\r\n                            messagebox.close();\r\n                        }))\r\n                    }, {\r\n                        label: 'NO',\r\n                        onClick: lang.hitch(this, lang.hitch(this, function() {\r\n                            this._cleanMap();\r\n                            messagebox.close();\r\n                        }))\r\n                    }]\r\n                });\r\n\r\n                break;\r\n            default:\r\n                new Message({\r\n                    type: type,\r\n                    titleLabel: `Widget ${this.nls._widgetLabel}: ${type}`,\r\n                    message: message,\r\n                });\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    // Funcion que permite habilitar el contenido de acuerdo al tab seleccionado\r\n    _tabToggleForm(evt) {\r\n        self_lw.tabSelected = evt.currentTarget.id;\r\n        if (evt.currentTarget.classList.contains('is-active')) {\r\n            return\r\n        };\r\n        dojo.query('.opcion_lw').forEach(function(node) {\r\n            let container_option = self_lw[`${node.id}_${node.classList[0]}`]\r\n            if (node.id == self_lw.tabSelected) {\r\n                node.classList.toggle('is-active')\r\n                container_option.classList.toggle('is-active')\r\n            } else {\r\n                node.classList.remove('is-active');\r\n                container_option.classList.remove('is-active')\r\n            }\r\n        });\r\n    },\r\n\r\n    _validateCoordinateNumber_lw(evt) {\r\n        let val = evt.currentTarget.value;\r\n        let srid = self_lw.select_punto_opcion_lw.value;\r\n        if (srid == self_lw.config.crs[0].epsg) {\r\n            // Solo aplica para coordenadas geograficas\r\n            evt.currentTarget.value = val.replace(/[^-0-9.]/g, '').replace(/(\\..*)\\./g, '$1').replace(/(\\-.*)\\-/g, '$1');\r\n        } else {\r\n            // Aplica para coordenadas UTM\r\n            evt.currentTarget.value = val.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        }\r\n    },\r\n\r\n    _populateSelectSistemReference_lw() {\r\n        this.config.crs.forEach(function(i) {\r\n            let opt = document.createElement(\"option\");\r\n            opt.value = i.epsg;\r\n            opt.text = i.name_epsg;\r\n            self_lw.select_punto_opcion_lw.add(opt);\r\n        });\r\n        this.select_poligono_opcion_lw.innerHTML = this.select_punto_opcion_lw.innerHTML;\r\n    },\r\n\r\n    _applyGraphic(evt) {\r\n        console.log(self_lw.tabSelected);\r\n        switch (self_lw.tabSelected) {\r\n            case 'punto':\r\n                self_lw._graphPoint();\r\n                break;\r\n            case 'poligono':\r\n                self_lw._graphPolygon();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    _graphPoint() {\r\n        // Captura del SRC seleccionado\r\n        let srid = self_lw.select_punto_opcion_lw.value;\r\n\r\n        if (srid == '') {\r\n            self_lw._showMessage(self_lw.nls.err_sistema_referencial)\r\n            self_lw.ap_select_punto_lw.classList.add('is-danger')\r\n            return\r\n        }\r\n\r\n        self_lw.ap_select_punto_lw.classList.remove('is-danger')\r\n\r\n        let src = srid == '4326' ? 'gcs' : 'utm';\r\n\r\n        // Validacion de cordenada X ingresada \r\n        let x = self_lw.ap_input_x_lw.value;\r\n\r\n\r\n        if (!x) {\r\n            self_lw.ap_input_x_lw.classList.add('is-danger')\r\n            return\r\n        };\r\n\r\n        // x = parseInt(x);\r\n\r\n        if (!self_lw._validateCoordX(x, src)) {\r\n            self_lw.ap_input_x_lw.classList.add('is-danger')\r\n            self_lw.ap_help_x_lw.classList.add('is-active');\r\n            self_lw.ap_help_x_lw.innerText = src == 'gcs' ? self_lw.nls.allowed_lon_values : self_lw.nls.allowed_este_values\r\n            return\r\n        };\r\n\r\n        self_lw.ap_input_x_lw.classList.remove('is-danger');\r\n        self_lw.ap_help_x_lw.classList.remove('is-active');\r\n\r\n        // Validacion de cordenada Y ingresada\r\n        let y = self_lw.ap_input_y_lw.value;\r\n\r\n        if (!y) {\r\n            self_lw.ap_input_y_lw.classList.add('is-danger')\r\n            return\r\n        };\r\n\r\n        // y = parseInt(y);\r\n\r\n        if (!self_lw._validateCoordY(y, src)) {\r\n            self_lw.ap_input_y_lw.classList.add('is-danger');\r\n            self_lw.ap_help_y_lw.classList.add('is-active');\r\n            self_lw.ap_help_y_lw.innerText = src == 'gcs' ? self_lw.nls.allowed_lat_values : self_lw.nls.allowed_norte_values\r\n                // self.ap_help_y_message_lw.classList.add('active')\r\n            return\r\n        };\r\n\r\n        self_lw.ap_input_y_lw.classList.remove('is-danger')\r\n        self_lw.ap_help_y_lw.classList.remove('is-active');\r\n\r\n        let geometryService = new GeometryService(self_lw.config.url_geometry_Server);\r\n\r\n\r\n        let spatialReference = new SpatialReference({ wkid: parseInt(srid) });\r\n        let point = new Point(parseFloat(x), parseFloat(y), spatialReference);\r\n        let pointTransform = null;\r\n\r\n        let parameters = new ProjectParameters();\r\n        parameters.geometries = [point.normalize()];\r\n        parameters.outSR = self_lw.map.spatialReference;\r\n        parameters.transformForward = true;\r\n\r\n        // var thiss = this;\r\n        //thiss.map.addLayer(thiss.layer);\r\n        geometryService.project(parameters);\r\n        geometryService.on(\"project-complete\", function(results) {\r\n            pointTransform = results.geometries[0];\r\n            let symbol = new SimpleMarkerSymbol(SimpleMarkerSymbol.STYLE_SQUARE, 15, new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([255, 0, 0]), 2), new Color([0, 255, 0, 0.25]));\r\n            // let symbol = new SimpleMarkerSymbol();\r\n\r\n            let graphic = new Graphic(pointTransform, symbol);\r\n            console.log(graphic);\r\n            if (graphic.geometry.x == \"NaN\" || graphic.geometry.y == \"NaN\") {\r\n                self_lw._showMessage(self_lw.nls.err_referenciar_coordenada);\r\n                // self_lw.obj_index = self_lw.obj_index - 1;\r\n                // console.log(\"No se puede referenciar la coordenada en el mapa\");\r\n                return\r\n            }\r\n\r\n\r\n\r\n            // self_lw.obj_index = self_lw.map.graphics.graphics.length;\r\n            self_lw.obj_index = self_lw.obj_index + 1;\r\n            let name = `grafico_${self_lw.obj_index}`;\r\n\r\n            self_lw.obj_resultados.push(name);\r\n\r\n            let graphicLayer = new GraphicsLayer({ id: name });\r\n\r\n            let font = new Font(\"15px\", Font.STYLE_NORMAL, Font.VARIANT_NORMAL, Font.WEIGHT_BOLD, \"Arial\");\r\n            let txtSym = new TextSymbol(name, font, new Color([250, 0, 0, 0.9]));\r\n            txtSym.setOffset(-15, -5).setAlign(TextSymbol.ALIGN_END)\r\n            txtSym.setHaloColor(new Color([255, 255, 255]));\r\n            txtSym.setHaloSize(1.5);\r\n            let graphicLabel = new Graphic(pointTransform, txtSym);\r\n\r\n            graphicLayer.add(graphic);\r\n            graphicLayer.add(graphicLabel);\r\n\r\n            self_lw.map.addLayer(graphicLayer);\r\n            // self_lw.map.graphics.add(graphic);\r\n            // self_lw.map.graphics.add(graphicLabel);\r\n            // self_lw.map.centerAndZoom(pointTransform, 10);\r\n            // self_lw._addResultados(graphic);\r\n            // self_lw.ap_none_resultados_opcion_lw.hidden = true;\r\n            // dojo.query('.container_resultados_lw').addClass('is-active')\r\n            // self_lw.ap_resultados_lw.click();\r\n\r\n            graphic.setInfoTemplate(new InfoTemplate(\"Coordenadas\", \"<span>Este / Long: </span>\" + point.x + \"<br />\" + \"<span>Norte / Lat: </span>\" + point.y));\r\n            self_lw.map.infoWindow.setTitle(graphic.getTitle());\r\n            self_lw.map.infoWindow.setContent(graphic.getContent());\r\n            self_lw.map.infoWindow.show(pointTransform);\r\n            self_lw.map.centerAndZoom(pointTransform, 10);\r\n\r\n\r\n            self_lw._addResultados(graphicLayer, name);\r\n            self_lw.ap_none_resultados_opcion_lw.hidden = true;\r\n\r\n            dojo.query('.container_resultados_lw').addClass('is-active')\r\n            self_lw.ap_resultados_lw.click();\r\n        });\r\n        geometryService.on(\"error\", function(error) {\r\n            self_lw._showMessage(error.message, type = 'error')\r\n            console.log(error);\r\n        })\r\n    },\r\n\r\n\r\n    _graphPolygon() {\r\n        self_lw.busyIndicator_lw.show()\r\n\r\n\r\n        if (self_lw.ap_upload_file_lw.value == \"\") {\r\n            self_lw._showMessage(self_lw.nls.err_formato_invalido, type = 'error')\r\n            self_lw.busyIndicator_lw.hide()\r\n            return\r\n        }\r\n\r\n\r\n\r\n        let srid = self_lw.select_poligono_opcion_lw.value;\r\n\r\n        if (srid == '') {\r\n            self_lw._showMessage(self_lw.nls.err_sistema_referencial)\r\n            self_lw.ap_select_poligono_lw.classList.add('is-danger')\r\n            self_lw.busyIndicator_lw.hide();\r\n            return\r\n        };\r\n\r\n        self_lw.ap_select_poligono_lw.classList.remove('is-danger');\r\n\r\n\r\n\r\n        let rings = self_lw.obj_resultados_xls.slice(1);\r\n        let polygonJson = { \"rings\": [rings], \"spatialReference\": { \"wkid\": parseInt(srid) } };\r\n\r\n\r\n        let geometryService = new GeometryService(self_lw.config.url_geometry_Server);\r\n\r\n        let polygon = new Polygon(polygonJson);\r\n        let polygonTransform = null;\r\n\r\n        let parameters = new ProjectParameters();\r\n        parameters.geometries = [polygon];\r\n        parameters.outSR = self_lw.map.spatialReference;\r\n        parameters.transformForward = true;\r\n\r\n        geometryService.project(parameters);\r\n        geometryService.on(\"project-complete\", function(results) {\r\n\r\n            polygonTransform = results.geometries[0];\r\n\r\n            self_lw.obj_index = self_lw.obj_index + 1;\r\n            let name = `grafico_${self_lw.obj_index}`;\r\n            self_lw.obj_resultados.push(name);\r\n\r\n            let graphicLayer = new GraphicsLayer({ id: name });\r\n\r\n            let symbol = new SimpleFillSymbol(\r\n                SimpleFillSymbol.STYLE_NULL,\r\n                new SimpleLineSymbol(\r\n                    SimpleLineSymbol.STYLE_SOLID,\r\n                    new Color([255, 0, 0]), 3\r\n                ),\r\n                new Color([125, 125, 125, 0.35]));\r\n\r\n            let graphic = new Graphic(polygonTransform, symbol);\r\n\r\n            let font = new Font(\"15px\", Font.STYLE_NORMAL, Font.VARIANT_NORMAL, Font.WEIGHT_BOLD, \"Arial\");\r\n            let txtSym = new TextSymbol(name, font, new Color([250, 0, 0, 0.9]));\r\n            // txtSym.setOffset(-15, -5).setAlign(TextSymbol.ALIGN_END)\r\n            txtSym.setHaloColor(new Color([255, 255, 255]));\r\n            txtSym.setHaloSize(1.5);\r\n\r\n            let center = polygonTransform.getCentroid();\r\n\r\n            let graphicLabel = new Graphic(center, txtSym);\r\n\r\n            graphicLayer.add(graphic);\r\n            graphicLayer.add(graphicLabel);\r\n\r\n            self_lw.map.addLayer(graphicLayer);\r\n            // self_lw.map.infoWindow.show(center);\r\n\r\n            let areasAndLengthParams = new AreasAndLengthsParameters();\r\n            areasAndLengthParams.lengthUnit = GeometryService.UNIT_METERS;\r\n            areasAndLengthParams.areaUnit = GeometryService.UNIT_HECTARES;\r\n            areasAndLengthParams.calculationType = \"geodesic\";\r\n            areasAndLengthParams.polygons = [graphic.geometry];\r\n\r\n            geometryService.areasAndLengths(areasAndLengthParams).then(function(results) {\r\n                let area = results.areas[0].toFixed(4);\r\n                let perimetro = results.lengths[0].toFixed(4);\r\n                graphic.setInfoTemplate(new InfoTemplate(\"Polígono\", \"<span>Área (ha): </span>\" + area + \"<br />\" + \"<span>Perímetro (m): </span>\" + perimetro));\r\n                self_lw.map.infoWindow.setTitle(graphic.getTitle());\r\n                self_lw.map.infoWindow.setContent(graphic.getContent());\r\n                self_lw.map.infoWindow.show(center);\r\n            });\r\n\r\n\r\n\r\n            // self_lw.map.centerAndZoom(center, 10);\r\n            self_lw.map.setExtent(graphic._extent, true);\r\n\r\n\r\n            self_lw._addResultados(graphicLayer, name);\r\n            self_lw.ap_none_resultados_opcion_lw.hidden = true;\r\n\r\n            dojo.query('.container_resultados_lw').addClass('is-active')\r\n            self_lw.ap_resultados_lw.click();\r\n\r\n            self_lw.busyIndicator_lw.hide();\r\n\r\n        });\r\n        geometryService.on(\"error\", function(error) {\r\n            self_lw.busyIndicator_lw.hide();\r\n            let messageErr = self_lw.nls.err_coordenadas_xlsx + '\\n\\nDetalle:\\n' + error.error.message\r\n            self_lw._showMessage(messageErr, type = 'error')\r\n        });\r\n\r\n\r\n\r\n    },\r\n\r\n    _validateCoordX(x, src) {\r\n        let response = true;\r\n        x = parseFloat(x)\r\n        switch (src) {\r\n            case 'gcs':\r\n                response = x > -180 & x < 180 ? true : false\r\n                return response;\r\n            case 'utm':\r\n                response = x >= 0 & x <= 1000000 ? true : false\r\n                return response\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    _validateCoordY(y, src) {\r\n        let response = true;\r\n        y = parseFloat(y)\r\n        switch (src) {\r\n            case 'gcs':\r\n                response = y > -90 & y < 90 ? true : false\r\n                return response;\r\n            case 'utm':\r\n                response = y >= 0 & y <= 10000000 ? true : false\r\n                return response;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    _addResultados(graphicLayer, name) {\r\n        // self_lw.obj_index = self_lw.obj_index + 1;\r\n        // let id_label = `grafico_${self_lw.obj_index}`;\r\n        // let id = `${name}_lw`\r\n        let i_class = self_lw.tabSelected == 'punto' ? 'far fa-dot-circle' : 'fas fa-draw-polygon'\r\n        let icon_elm = `<span class=\"icon is-small\"><i class=\"${i_class}\"></i></span>`\r\n\r\n        let tr = dojo.create('tr');\r\n\r\n        // self_lw.obj_resultados[id] = {\r\n        //     idx_graph: self_lw.obj_index - 1,\r\n        //     idx_label: self_lw.obj_index,\r\n        //     extent: graph._extent\r\n        // }\r\n        let td_array = [];\r\n        td_array.push(`<td>${icon_elm}</td>`);\r\n        td_array.push(`<td id=\"${name}_name\" class=\"has-text-left\" contenteditable='true'>${name}</td>`);\r\n        td_array.push(`<td><span id=\"${name}_ext\" class=\"icon is-small\"><i class=\"fas fa-search\"></i></span></td>`);\r\n        td_array.push(`<td><span id=\"${name}_del\" class=\"icon is-small\" style=\"color: #FF5722;\"><i class=\"far fa-trash-alt\"></i></span></td>`);\r\n\r\n        let tds = td_array.join('');\r\n\r\n        // let tds = `<td>${icon_elm}</td><td id=\"${name}_name\" class=\"has-text-left\" contenteditable='true'>${name}</td><td><span id=\"${name}_ext\" class=\"icon is-small\"><i class=\"fas fa-search\"></i></span></td>`;\r\n        tr.id = name;\r\n        tr.innerHTML = tds;\r\n        tr.style.cursor = \"pointer\";\r\n        self_lw.ap_resultados_body_lw.appendChild(tr)\r\n        dojo.query(`#${name}_ext`).on('click', self_lw._zoomToExtentByResult);\r\n        dojo.query(`#${name}_name`).on('input', self_lw._editaNameResult);\r\n        dojo.query(`#${name}_del`).on('click', self_lw._deleteResult);\r\n    },\r\n\r\n    _zoomToExtentByResult(evt) {\r\n        let id = evt.currentTarget.id.replace('_ext', '');\r\n        let lyr = self_lw.map.getLayer(id);\r\n        self_lw.map.setExtent(lyr.graphics[0]._extent, true);\r\n    },\r\n\r\n    _editaNameResult(evt) {\r\n        let id = evt.currentTarget.id.replace('_name', '');\r\n        self_lw.map.getLayer(id).graphics[1].symbol.text = evt.currentTarget.innerText;\r\n        self_lw.map.getLayer(id).refresh()\r\n    },\r\n\r\n    _deleteResult(evt) {\r\n        let id = evt.currentTarget.id.replace('_del', '');\r\n        let elem = dojo.query(`#${id}`);\r\n        self_lw.map.removeLayer(self_lw.map.getLayer(id));\r\n        elem[0].parentNode.removeChild(elem[0]);\r\n    },\r\n\r\n    _uploadFile(evt) {\r\n        self_lw.busyIndicator_lw.show();\r\n        if (!evt.currentTarget.files[0]) {\r\n            self_lw.busyIndicator_lw.hide();\r\n            return\r\n        };\r\n        let name = evt.currentTarget.files[0].name;\r\n\r\n        if (!name.endsWith('.xlsx')) {\r\n            self_lw._showMessage(self_lw.nls.err_formato_invalido, type = 'error');\r\n            self_lw.busyIndicator_lw.hide();\r\n            return\r\n        }\r\n\r\n        readXlsxFile(evt.currentTarget.files[0])\r\n            .then((data) => {\r\n                self_lw.ap_upload_file_name_lw.innerText = name;\r\n\r\n                self_lw.ap_container_upload_file_lw.classList.remove('is-danger');\r\n                self_lw.ap_help_message_lw.classList.remove('has-text-danger');\r\n\r\n                self_lw.ap_container_upload_file_lw.classList.add('is-primary')\r\n                self_lw.obj_resultados_xls = data;\r\n\r\n                self_lw.ap_help_message_lw.classList.add('has-text-primary');\r\n                self_lw.ap_help_message_lw.innerText = self_lw.nls.suc_cargar_archivo;\r\n                self_lw.busyIndicator_lw.hide();\r\n            })\r\n            .catch((error) => {\r\n                self_lw.ap_container_upload_file_lw.classList.remove('is-primary');\r\n                self_lw.ap_help_message_lw.classList.remove('has-text-primary');\r\n\r\n                self_lw.ap_container_upload_file_lw.classList.add('is-danger')\r\n                self_lw.ap_help_message_lw.classList.add('has-text-danger');\r\n                self_lw.ap_help_message_lw.innerText = self_lw.nls.err_cargar_archivo;\r\n                self_lw._showMessage(error.message, type = 'error')\r\n                self_lw.busyIndicator_lw.hide();\r\n            });\r\n    },\r\n\r\n    _onChangeSelectSRC(evt) {\r\n        let srid = evt.target.value;\r\n        if (srid == self_lw.config.crs[0].epsg) {\r\n            self_lw.ap_input_x_lw.placeholder = \"Longitud\";\r\n            self_lw.ap_input_y_lw.placeholder = \"Latitud\";\r\n            self_lw.ap_input_label_x_lw.innerText = self_lw.nls.title_longitud;\r\n            self_lw.ap_input_label_y_lw.innerText = self_lw.nls.title_latitud;\r\n        } else {\r\n            self_lw.ap_input_x_lw.placeholder = \"Este\"\r\n            self_lw.ap_input_y_lw.placeholder = \"Norte\"\r\n            self_lw.ap_input_label_x_lw.innerText = self_lw.nls.title_este;\r\n            self_lw.ap_input_label_y_lw.innerText = self_lw.nls.title_norte;\r\n            let val_x = self_lw.ap_input_x_lw.value;\r\n            let val_y = self_lw.ap_input_y_lw.value;\r\n            self_lw.ap_input_x_lw.value = val_x.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n            self_lw.ap_input_y_lw.value = val_y.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\r\n        }\r\n    },\r\n\r\n    startup() {\r\n        this.inherited(arguments);\r\n        console.log('Localizar_wgt::startup');\r\n        this.busyIndicator_lw = BusyIndicator.create({\r\n            target: this.domNode.parentNode.parentNode.parentNode,\r\n            backgroundOpacity: 0\r\n        });\r\n        dojo.query('.opcion_lw').on('click', this._tabToggleForm);\r\n        dojo.query('.btn_aplicar_lw').on('click', this._applyGraphic);\r\n        dojo.query('.upload_file_lw').on('change', this._uploadFile);\r\n        dojo.query('.select_punto_opcion_cls').on('change', this._onChangeSelectSRC);\r\n        this._populateSelectSistemReference_lw()\r\n    },\r\n    // onOpen() {\r\n    //   console.log('Localizar_wgt::onOpen');\r\n\r\n    // },\r\n    // onClose(){\r\n    //   console.log('Localizar_wgt::onClose');\r\n    // },\r\n    // onMinimize(){\r\n    //   console.log('Localizar_wgt::onMinimize');\r\n    // },\r\n    // onMaximize(){\r\n    //   console.log('Localizar_wgt::onMaximize');\r\n    // },\r\n    // onSignIn(credential){\r\n    //   console.log('Localizar_wgt::onSignIn', credential);\r\n    // },\r\n    // onSignOut(){\r\n    //   console.log('Localizar_wgt::onSignOut');\r\n    // }\r\n    // onPositionChange(){\r\n    //   console.log('Localizar_wgt::onPositionChange');\r\n    // },\r\n    // resize(){\r\n    //   console.log('Localizar_wgt::resize');\r\n    // }\r\n});"]}