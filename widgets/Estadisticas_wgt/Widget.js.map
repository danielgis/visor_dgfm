{"version":3,"sources":["../../../widgets/Estadisticas_wgt/Widget.js"],"names":["declare","BaseWidget","lang","LayerInfos","Query","QueryTask","StatisticDefinition","on","Point","baseClass","layersMap","iniClause","field_departamento_bar","field_x_vertical_bar","field_y_vertical_bar","label_y_vertical_bar","field_x_pie","field_y_pie","label_y_pie","field_x_horizontal_bar","field_y_horizontal_bar","label_y_horizontal_bar","field_dep_nm_depa","field_dep_cd_depa","chart_tipo_persona","chart_tipo_origen","widthPanel","initialData","controller_query","postCreate","self_ew","_getAllLayers","panel","getPanel","getInstance","map","itemInfo","then","hitch","layerInfosObj","_configureStylePanelWidget","create","panel_child","getChildren","styleElement","document","createElement","panel_child_child","domNode","children","removeChild","length","style","backgroundColor","style_thumb","style_scrollbar","style_background","appendChild","createTextNode","_indicatorReinfo","where","query","returnCountOnly","queryTask","feature_dc_tb_url","executeForCount","results","el","odometer_ew","od","Odometer","value","format","update","innerHTML","error","console","log","_controllerZoom","extent","screenPoint","toScreen","getCenter","upperLeftScreenPoint","x","y","upperLeftMapPoint","toMap","distance","xmax","_zoomToRegion","evt","backColor","where_dep","where_dc","colorSelected","colorAnother","i","getElementAtEvent","feature_dc","hide","setFilter","data","labels","_index","ap_title_indicador_ew","nls","title_indicador","title_indicador_nacional","_yScale","ticks","forEach","elm","idx","push","active","_chart","config","datasets","outSpatialReference","spatialReference","feature_dep","getUrl","executeForExtent","setExtent","show","_drawPieChart","process","_drawHorizontalBarChart","_drawVerticalBarChart","url","feature_dc_tb","groupByFieldsForStatistics","countStatDef","statisticType","onStatisticField","outStatisticFieldName","countStatDef_2","outStatistics","execute","dataresults","features","attributes","initialDataArray","dataresults_sort","sort","a","b","_VerticalBarChart","ctx","VerticalBarAp","getContext","canvas","height","myChart","Chart","type","label","borderWidth","borderColor","options","responsive","legend","display","scales","yAxes","fontColor","gridLines","color","lineWidth","xAxes","plugins","render","onClick","_pieChart","_updatePieChart","PieAp","hoverOffset","animation","animateScale","animateRotate","index","_HorizontalBarChart","_updateHorizontalBarChart","HorizontalBarAp","_acordeonFunction","target","nextElementSibling","parentElement","classList","toggle","startup","inherited","arguments","getLayerInfoById","layer_id_dc","getTableInfoById","service_id_horizontal_bar","layer_id_dep","onOpen","onClose"],"mappings":"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","file":"Widget.js","sourcesContent":["import declare from 'dojo/_base/declare';\r\nimport BaseWidget from 'jimu/BaseWidget';\r\nimport lang from 'dojo/_base/lang';\r\nimport LayerInfos from 'jimu/LayerInfos/LayerInfos';\r\nimport Query from \"esri/tasks/query\";\r\nimport QueryTask from \"esri/tasks/QueryTask\";\r\nimport StatisticDefinition from \"esri/tasks/StatisticDefinition\";\r\nimport on from 'dojo/on';\r\nimport Point from \"esri/geometry/Point\";\r\nimport 'ChartLabels';\r\n\r\n// To create a widget, you need to derive from BaseWidget.\r\nexport default declare([\r\n    BaseWidget,\r\n    Query,\r\n    QueryTask,\r\n    StatisticDefinition,\r\n], {\r\n\r\n    // Developer: Ing. Geógrafo Daniel Aguado H.\r\n    // linkedin: https://www.linkedin.com/in/danielgis\r\n    // WebSite: https://danielgis.github.io/\r\n\r\n    // Custom widget code goes here\r\n\r\n    baseClass: 'estadisticas-wgt',\r\n\r\n    // add additional properties here\r\n    layersMap: [],\r\n    iniClause: '1=1',\r\n\r\n    // Elementos del grafico de barras vertical\r\n    // feature_id_vertical_bar: '',\r\n    field_departamento_bar: 'DEPARTAMENTO',\r\n\r\n    field_x_vertical_bar: 'ID_DEPA',\r\n    field_y_vertical_bar: 'COUNT_DEPARTAMENTO',\r\n    label_y_vertical_bar: 'Numero de Reinfos',\r\n\r\n    // Elementos del gráfico de torta\r\n    // feature_id_vertical_bar: '',\r\n    field_x_pie: 'M_TIPO_PERSONA',\r\n    field_y_pie: 'COUNT_M_TIPO_PERSONA',\r\n    label_y_pie: 'Tipo de persona',\r\n\r\n    // Elementos del grafico de barras horizontal\r\n    // feature_id_vertical_bar: '',\r\n    field_x_horizontal_bar: 'ORIGEN',\r\n    field_y_horizontal_bar: 'COUNT_ORIGEN',\r\n    label_y_horizontal_bar: 'Origen',\r\n\r\n    field_dep_nm_depa: 'NM_DEPA',\r\n    field_dep_cd_depa: 'CD_DEPA',\r\n\r\n    chart_tipo_persona: null,\r\n    chart_tipo_origen: null,\r\n    widthPanel: 360,\r\n\r\n    initialData: {},\r\n\r\n    // Almacena el valor de la ultima region seleccionada\r\n    controller_query: null,\r\n\r\n    // methods to communication with app container:\r\n    postCreate() {\r\n        self_ew = this;\r\n        this._getAllLayers();\r\n        this.panel = this.getPanel();\r\n        // this.panel.position.width = 720\r\n        // this.panel.setPosition(this.panel.position);\r\n        // this.panel.panelManager.normalizePanel(this.panel);\r\n    },\r\n\r\n    _getAllLayers() {\r\n        LayerInfos.getInstance(this.map, this.map.itemInfo)\r\n            .then(lang.hitch(this, function(layerInfosObj) {\r\n                this.layersMap = layerInfosObj;\r\n            }));\r\n    },\r\n\r\n    _configureStylePanelWidget(create = true) {\r\n        // let panel = this.getPanel();\r\n        let panel_child = this.panel.getChildren()[0];\r\n\r\n        let styleElement = document.createElement(\"style\");\r\n        if (!create) {\r\n            let panel_child_child = panel_child.domNode.children\r\n            panel_child.domNode.removeChild(panel_child_child[panel_child_child.length - 1]);\r\n            panel_child.domNode.style.backgroundColor = 'white';\r\n            return;\r\n        }\r\n        panel_child.domNode.style.backgroundColor = '#333';\r\n        let style_thumb = '::-webkit-scrollbar-thumb {border-radius: 0px; opacity: 0.6; background: #999999;}'\r\n        let style_scrollbar = '::-webkit-scrollbar {border-radius: 0px; width: 6px; background-color: #333; height: 6px;}'\r\n        let style_background = '.jimu-widget-frame.jimu-container {background-color: white;}'\r\n\r\n        styleElement.appendChild(document.createTextNode(style_scrollbar))\r\n        styleElement.appendChild(document.createTextNode(style_thumb))\r\n        styleElement.appendChild(document.createTextNode(style_background))\r\n        panel_child.domNode.appendChild(styleElement);\r\n    },\r\n\r\n    _indicatorReinfo(where = self_ew.iniClause) {\r\n        let query = new Query();\r\n        query.where = where;\r\n        query.returnCountOnly = true;\r\n        // let url = this.feature_dc_tb.getUrl();\r\n        let queryTask = new QueryTask(this.feature_dc_tb_url);\r\n        queryTask.executeForCount(query,\r\n            function(results) {\r\n                var el = self_ew.odometer_ew;\r\n                od = new Odometer({ el: el, value: 0, format: '' });\r\n                od.update(0)\r\n                el.innerHTML = results;\r\n            },\r\n            function(error) {\r\n                console.log(error)\r\n            })\r\n    },\r\n\r\n    _controllerZoom(extent) {\r\n        let screenPoint = self_ew.map.toScreen(self_ew.map.extent.getCenter())\r\n        let upperLeftScreenPoint = new Point(screenPoint.x - self_ew.widthPanel, screenPoint.y - self_ew.widthPanel);\r\n        let upperLeftMapPoint = self_ew.map.toMap(upperLeftScreenPoint);\r\n        let distance = self_ew.map.extent.getCenter().x - upperLeftMapPoint.x\r\n        extent.xmax = extent.xmax + distance;\r\n        return extent;\r\n    },\r\n\r\n    _zoomToRegion(evt) {\r\n        let backColor = [];\r\n        let where_dep;\r\n        let where_dc;\r\n        let colorSelected = '#00feca';\r\n        let colorAnother = '#36a2eb';\r\n\r\n        let i = this.getElementAtEvent(evt);\r\n        if (i.length == 0) {\r\n            return;\r\n        }\r\n\r\n        self_ew.feature_dc.hide()\r\n        self_ew.feature_dc.setFilter(this.iniClause)\r\n\r\n        let value = this.data.labels[i[0]._index];\r\n\r\n        if (value == self_ew.controller_query) {\r\n            colorSelected = colorAnother;\r\n            where_dc = self_ew.iniClause;\r\n            where_dep = self_ew.iniClause;\r\n            self_ew.ap_title_indicador_ew.innerHTML = `${self_ew.nls.title_indicador}<br/>${self_ew.nls.title_indicador_nacional}`;\r\n        } else {\r\n            // self_ew.initialData[value]\r\n            where_dc = `${self_ew.field_x_vertical_bar} = '${self_ew.initialData[value]}'`;\r\n            console.log(where_dc);\r\n            where_dep = `lower(${self_ew.field_dep_nm_depa}) = lower('${value}')`;\r\n            // where_dc = `lower(${self_ew.field_x_vertical_bar}) = lower('${value}')`;\r\n            // where_dep = `lower(${self_ew.field_dep_nm_depa}) = lower('${value}')`;\r\n            self_ew.controller_query = value;\r\n            self_ew.ap_title_indicador_ew.innerHTML = `${self_ew.nls.title_indicador}<br/>${value}`;\r\n        }\r\n\r\n        i[0]._yScale.ticks.forEach(function(elm, idx) {\r\n            idx == i[0]._index ? backColor.push(colorSelected) : backColor.push(colorAnother);\r\n        });\r\n        this.active[0]._chart.config.data.datasets[0].backgroundColor = backColor;\r\n        this.update()\r\n\r\n        let query = new Query();\r\n        query.where = where_dep;\r\n        query.outSpatialReference = self_ew.map.spatialReference;\r\n        queryTask = new QueryTask(self_ew.feature_dep.getUrl())\r\n\r\n\r\n        queryTask.executeForExtent(query,\r\n            function(results) {\r\n                self_ew.map.setExtent(results.extent, true);\r\n            },\r\n            function(error) {\r\n                console.log(error);\r\n            })\r\n\r\n        self_ew.feature_dc.setFilter(where_dc)\r\n        self_ew.feature_dc.show()\r\n\r\n        self_ew._indicatorReinfo(where = where_dc);\r\n        self_ew._drawPieChart(where_dc, process = 'update');\r\n        self_ew._drawHorizontalBarChart(where_dc, process = 'update');\r\n    },\r\n\r\n    _drawVerticalBarChart() {\r\n        var url = this.feature_dc_tb.getUrl();\r\n\r\n        var queryTask = new QueryTask(url);\r\n        var query = new Query();\r\n\r\n        // query.where = this.iniClause;\r\n        query.groupByFieldsForStatistics = [self_ew.field_x_vertical_bar];\r\n\r\n        var countStatDef = new StatisticDefinition();\r\n        countStatDef.statisticType = \"min\";\r\n        countStatDef.onStatisticField = self_ew.field_departamento_bar;\r\n        countStatDef.outStatisticFieldName = self_ew.field_departamento_bar;\r\n\r\n        let countStatDef_2 = new StatisticDefinition();\r\n        countStatDef_2.statisticType = \"count\";\r\n        countStatDef_2.onStatisticField = self_ew.field_x_vertical_bar;\r\n        countStatDef_2.outStatisticFieldName = self_ew.field_y_vertical_bar;\r\n\r\n        // query.orderByFields = [`COUNT(${self_ew.field_x_vertical_bar}) DESC`]\r\n        query.outStatistics = [countStatDef, countStatDef_2];\r\n\r\n        queryTask.execute(query, function(results) {\r\n            let dataresults = results.features.map((i) => [i.attributes[self_ew.field_departamento_bar], i.attributes[self_ew.field_y_vertical_bar]]);\r\n            let initialDataArray = results.features.map((i) => [i.attributes[self_ew.field_x_vertical_bar], i.attributes[self_ew.field_departamento_bar]]);\r\n            let dataresults_sort = dataresults.sort(function(a, b) { return b[1] - a[1]; });\r\n\r\n            initialDataArray.forEach(\r\n                function(i) {\r\n                    // console.log(i);\r\n                    self_ew.initialData[i[1]] = i[0]\r\n                }\r\n            )\r\n\r\n            // self_ew.initialData = JSON.stringify(initialDataArray);\r\n            // console.log(self_ew.initialData)\r\n            // x = results.features.map((i) => i.attributes[self_ew.field_x_vertical_bar]);\r\n            // y = results.features.map((i) => i.attributes[self_ew.field_y_vertical_bar]);\r\n            x = dataresults_sort.map((i) => i[0]);\r\n            y = dataresults_sort.map((i) => i[1]);\r\n\r\n            self_ew._VerticalBarChart(x, y);\r\n        }, function(error) {\r\n            console.log(error)\r\n        });\r\n\r\n    },\r\n\r\n    _VerticalBarChart(x, y) {\r\n        var ctx = self_ew.VerticalBarAp.getContext('2d');\r\n        ctx.canvas.height = 500;\r\n        var myChart = new Chart(ctx, {\r\n            type: 'horizontalBar',\r\n            data: {\r\n                labels: x,\r\n                datasets: [{\r\n                    label: self_ew.label_y_vertical_bar,\r\n                    data: y,\r\n                    borderWidth: 0.1,\r\n                    borderColor: '#eeeeee',\r\n                    backgroundColor: '#36a2eb'\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                // maintainAspectRatio: false,\r\n                legend: {\r\n                    display: false,\r\n                },\r\n                scales: {\r\n                    yAxes: [{\r\n                        ticks: {\r\n                            // beginAtZero: true,\r\n                            fontColor: '#eeeeee'\r\n                        },\r\n                        gridLines: {\r\n                            color: '#eeeeee',\r\n                            lineWidth: 0.1\r\n                        }\r\n                    }],\r\n                    xAxes: [{\r\n                        ticks: {\r\n                            // beginAtZero: true,\r\n                            fontColor: '#eeeeee'\r\n                        },\r\n                        gridLines: {\r\n                            color: '#eeeeee',\r\n                            lineWidth: 0.1\r\n                        }\r\n                    }]\r\n                },\r\n                plugins: {\r\n                    labels: {\r\n                        render: 'value',\r\n                        fontColor: '#eeeeee'\r\n                    },\r\n                },\r\n                onClick: self_ew._zoomToRegion\r\n            }\r\n        });\r\n    },\r\n\r\n    _drawPieChart(where = self_ew.iniClause, process = 'initial') {\r\n        var url = this.feature_dc_tb.getUrl();\r\n\r\n        var queryTask = new QueryTask(url);\r\n        var query = new Query();\r\n\r\n        query.where = where;\r\n        query.groupByFieldsForStatistics = [self_ew.field_x_pie];\r\n\r\n        var countStatDef = new StatisticDefinition();\r\n        countStatDef.statisticType = \"count\";\r\n        countStatDef.onStatisticField = self_ew.field_x_pie;\r\n        countStatDef.outStatisticFieldName = self_ew.field_y_pie;\r\n\r\n        query.outStatistics = [countStatDef];\r\n\r\n        queryTask.execute(query, function(results) {\r\n            x = results.features.map((i) => i.attributes[self_ew.field_x_pie]);\r\n            y = results.features.map((i) => i.attributes[self_ew.field_y_pie]);\r\n            if (process == 'initial') {\r\n                self_ew._pieChart(x, y);\r\n            } else if (process == 'update') {\r\n                self_ew._updatePieChart(x, y)\r\n            }\r\n        });\r\n    },\r\n\r\n    _pieChart(x, y) {\r\n        var ctx = self_ew.PieAp.getContext('2d');\r\n        ctx.canvas.height = 250;\r\n        self_ew.chart_tipo_persona = new Chart(ctx, {\r\n            type: 'doughnut',\r\n            data: {\r\n                labels: x,\r\n                datasets: [{\r\n                    label: self_ew.label_y_pie,\r\n                    data: y,\r\n                    backgroundColor: [\r\n                        '#07689f',\r\n                        '#68b0ab',\r\n                        'rgb(255, 99, 132)',\r\n                        'rgb(255, 205, 86)',\r\n                        '#fff48f',\r\n                    ],\r\n                    hoverOffset: 4\r\n                }]\r\n            },\r\n            // plugins: [ChartDataLabels],\r\n            options: {\r\n                responsive: true,\r\n                // maintainAspectRatio: false,\r\n                animation: {\r\n                    animateScale: true,\r\n                    animateRotate: true\r\n                },\r\n                legend: {\r\n                    display: true,\r\n                    labels: {\r\n                        fontColor: '#eeeeee'\r\n                    }\r\n                },\r\n                plugins: {\r\n                    labels: {\r\n                        render: 'value',\r\n                        fontColor: '#eeeeee'\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    _updatePieChart(x, y) {\r\n        // self_ew.chart_tipo_persona.data.datasets.forEach((dataset) => {\r\n        // dataset.data = y;\r\n        // dataset.label = x;\r\n        // });\r\n        self_ew.chart_tipo_persona.data.labels = x;\r\n        self_ew.chart_tipo_persona.data.datasets[0].data = y\r\n        self_ew.chart_tipo_persona.update();\r\n    },\r\n\r\n    _drawHorizontalBarChart(where = self_ew.iniClause, process = 'initial') {\r\n        var url = this.feature_dc_tb.getUrl();\r\n\r\n        var queryTask = new QueryTask(url);\r\n        var query = new Query();\r\n\r\n        query.where = where;\r\n        query.groupByFieldsForStatistics = [self_ew.field_x_horizontal_bar];\r\n\r\n        var countStatDef = new StatisticDefinition();\r\n        countStatDef.statisticType = \"count\";\r\n        countStatDef.onStatisticField = self_ew.field_x_horizontal_bar;\r\n        countStatDef.outStatisticFieldName = self_ew.field_y_horizontal_bar;\r\n\r\n        query.outStatistics = [countStatDef];\r\n\r\n        queryTask.execute(query, function(results) {\r\n            let x = results.features.map((i) => i.attributes[self_ew.field_x_horizontal_bar]);\r\n            for (let index = 0; index < x.length; index++) {\r\n                if (x[index] == 'SUNAT2') {\r\n                    x[index] = 'SUNAT 2020';\r\n                } else if (x[index] == 'SUNAT') {\r\n                    x[index] = 'SUNAT 2017';\r\n                } else {\r\n\r\n                }\r\n            }\r\n            let y = results.features.map((i) => i.attributes[self_ew.field_y_horizontal_bar]);\r\n            if (process == 'initial') {\r\n                self_ew._HorizontalBarChart(x, y);\r\n            } else if (process == 'update') {\r\n                self_ew._updateHorizontalBarChart(x, y)\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    _HorizontalBarChart(x, y) {\r\n        var ctx = self_ew.HorizontalBarAp.getContext('2d');\r\n        ctx.canvas.height = 250;\r\n        self_ew.chart_tipo_origen = new Chart(ctx, {\r\n            type: 'bar',\r\n            data: {\r\n                labels: x,\r\n                datasets: [{\r\n                    label: self_ew.label_y_horizontal_bar,\r\n                    data: y,\r\n                    borderWidth: 0.1,\r\n                    borderColor: '#eeeeee',\r\n                    backgroundColor: [\r\n                        '#00d1b2',\r\n                        'rgb(255, 99, 132)',\r\n                        'rgb(255, 205, 86)',\r\n                        '#fff48f',\r\n                    ],\r\n                    // borderWidth: 1,\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                // maintainAspectRatio: false,\r\n                legend: {\r\n                    display: false,\r\n                },\r\n                scales: {\r\n                    yAxes: [{\r\n                        ticks: {\r\n                            // beginAtZero: true,\r\n                            fontColor: '#eeeeee'\r\n                        },\r\n                        gridLines: {\r\n                            color: '#eeeeee',\r\n                            lineWidth: 0.1\r\n                        }\r\n                    }],\r\n                    xAxes: [{\r\n                        ticks: {\r\n                            // beginAtZero: true,\r\n                            fontColor: '#eeeeee'\r\n                        },\r\n                        gridLines: {\r\n                            color: '#eeeeee',\r\n                            lineWidth: 0.1\r\n                        }\r\n                    }]\r\n                },\r\n                plugins: {\r\n                    labels: {\r\n                        render: 'value',\r\n                        fontColor: '#eeeeee'\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    _updateHorizontalBarChart(x, y) {\r\n        self_ew.chart_tipo_origen.data.labels = x\r\n        self_ew.chart_tipo_origen.data.datasets[0].data = y\r\n        self_ew.chart_tipo_origen.update();\r\n    },\r\n\r\n    _acordeonFunction(evt) {\r\n        let panel = evt.target.nextElementSibling;\r\n        if (!panel) {\r\n            panel = evt.target.parentElement.nextElementSibling;\r\n            evt.target.parentElement.classList.toggle(\"active\");\r\n        }\r\n        evt.target.classList.toggle(\"active\");\r\n        panel.classList.toggle(\"active\");\r\n\r\n\r\n        // if (panel.style.maxHeight) {\r\n        //     panel.style.maxHeight = null;\r\n        // } else {\r\n        //     panel.style.maxHeight = panel.scrollHeight + \"px\";\r\n        // }\r\n    },\r\n    startup() {\r\n        this.inherited(arguments);\r\n        this.feature_dc = this.layersMap.getLayerInfoById(this.config.layer_id_dc);\r\n        this.feature_dc_tb = this.layersMap.getTableInfoById(this.config.service_id_horizontal_bar);\r\n        this.feature_dc_tb_url = this.feature_dc_tb.getUrl();\r\n        this.feature_dep = this.layersMap.getLayerInfoById(this.config.layer_id_dep);\r\n        this._indicatorReinfo();\r\n        this._drawVerticalBarChart();\r\n        this._drawPieChart();\r\n        this._drawHorizontalBarChart();\r\n        // console.log('Estadisticas_wgt::startup');\r\n\r\n    },\r\n    onOpen() {\r\n        console.log('Estadisticas_wgt::onOpen');\r\n        this._configureStylePanelWidget();\r\n        // this.panel = this.getPanel();\r\n        // if (this.ownerDocumentBody.clientWidth > 1270) {\r\n        //     this.panel.position.width = 720\r\n        // } else {\r\n        //     this.panel.position.width = 360\r\n        // }\r\n        // this.panel.setPosition(this.panel.position);\r\n        // this.panel.panelManager.normalizePanel(this.panel);\r\n    },\r\n\r\n    onClose() {\r\n        console.log('Estadisticas_wgt::onClose');\r\n        this._configureStylePanelWidget(create = false);\r\n    },\r\n    // _resizeController() {\r\n    //     this.panel = this.getPanel();\r\n    //     this.panel.position.width = screen.width > 1270 ? 720 : 320;\r\n    //     this.panel.setPosition(this.panel.position);\r\n    //     this.panel.panelManager.normalizePanel(this.panel);\r\n    // },\r\n    // onMinimize(){\r\n    //   console.log('Estadisticas_wgt::onMinimize');\r\n    // },\r\n    // onMaximize(){\r\n    //   console.log('Estadisticas_wgt::onMaximize');\r\n    // },\r\n    // onSignIn(credential){\r\n    //   console.log('Estadisticas_wgt::onSignIn', credential);\r\n    // },\r\n    // onSignOut(){\r\n    //   console.log('Estadisticas_wgt::onSignOut');\r\n    // }\r\n    // onPositionChange(){\r\n    //   console.log('Estadisticas_wgt::onPositionChange');\r\n    // },\r\n    // resize() {\r\n    //     console.log('Estadisticas_wgt::resize');\r\n    //     // this._resizeController()\r\n    // }\r\n});"]}